{"version":3,"sources":["webpack:///./src/views/user/post/NewPost.vue?16a6","webpack:///src/views/user/post/NewPost.vue","webpack:///./src/views/user/post/NewPost.vue?763a","webpack:///./src/views/user/post/NewPost.vue","webpack:///./src/views/user/post/NewPost.vue?5bd1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","$event","preventDefault","savePost","apply","arguments","attrs","ref","type","size","filesSelected","onBeforeDelete","fileDeleted","model","value","callback","$$v","fileRecords","expression","directives","name","rawName","data","domProps","target","composing","$set","customModulesForEditor","editorSettings","customToolbar","handleImageAdded","$router","back","staticRenderFns","component"],"mappings":"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","file":"js/chunk-0c63b1e8.42d60474.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12\"},[_c('div',{staticClass:\"card mb-3 pe-5 ps-5 pb-4 pt-4\"},[_c('h5',{staticClass:\"mt-3\"},[_vm._v(\"Create Post\")]),_c('p',{staticClass:\"text-muted\"},[_vm._v(\"All fields are required\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.savePost.apply(null, arguments)}}},[_c('div',{staticClass:\"col-10 col-sm-10 col-md-7 col-lg-6\"},[_c('label',{staticClass:\"mt-3\",attrs:{\"for\":\"\"}},[_vm._v(\"Image\")]),_c('VueFileAgent',{ref:\"vueFileAgent\",staticClass:\"mb-2\",attrs:{\"multiple\":false,\"maxSize\":'5MB',\"deletable\":true,\"accept\":'image/*,',\"theme\":'list',\"errorText\":{\n                   type: 'Invalid file type. Only image file is allowed',\n                   size: 'Image should not exceed 5MB in size',\n                 }},on:{\"select\":function($event){return _vm.filesSelected($event)},\"beforedelete\":function($event){return _vm.onBeforeDelete($event)},\"delete\":function($event){return _vm.fileDeleted($event)}},model:{value:(_vm.fileRecords),callback:function ($$v) {_vm.fileRecords=$$v},expression:\"fileRecords\"}}),_c('label',{staticClass:\"mt-1\",attrs:{\"for\":\"posttitle\"}},[_vm._v(\"Enter Title\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.data.title),expression:\"data.title\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"posttitle\",\"placeholder\":\" \"},domProps:{\"value\":(_vm.data.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.data, \"title\", $event.target.value)}}}),_c('label',{staticClass:\"mt-1\",attrs:{\"for\":\"postexcerpt\"}},[_vm._v(\"Post Excerpt\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.data.post_excerpt),expression:\"data.post_excerpt\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"postexcerpt\",\"placeholder\":\" \"},domProps:{\"value\":(_vm.data.post_excerpt)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.data, \"post_excerpt\", $event.target.value)}}}),_c('label',{staticClass:\"mt-2\",attrs:{\"for\":\"updatecontent\"}},[_vm._v(\"Content\")])],1),_c('vue-editor',{attrs:{\"id\":\"editor\",\"customModules\":_vm.customModulesForEditor,\"editorOptions\":_vm.editorSettings,\"editorToolbar\":_vm.customToolbar,\"useCustomImageHandler\":\"\"},on:{\"image-added\":_vm.handleImageAdded},model:{value:(_vm.data.content),callback:function ($$v) {_vm.$set(_vm.data, \"content\", $$v)},expression:\"data.content\"}}),_c('div',{staticClass:\"d-flex mt-3\"},[_c('button',{staticClass:\"btn btn-success btn-sm me-1\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Save Post\")]),_c('a',{staticClass:\"btn btn-secondary btn-sm\",attrs:{\"href\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.$router.back()}}},[_vm._v(\"Cancel\")])])],1)])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n <div>\r\n  <div class=\"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4\">\r\n   <div class=\"row justify-content-center\">\r\n    <div class=\"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12\">\r\n      <div class=\"card mb-3 pe-5 ps-5 pb-4 pt-4\">\r\n       <h5 class=\"mt-3\">Create Post</h5>\r\n       <p class=\"text-muted\">All fields are required</p>\r\n        <form @submit.prevent=\"savePost\">\r\n         <div class=\"col-10 col-sm-10 col-md-7 col-lg-6\">\r\n          <label for=\"\" class=\"mt-3\">Image</label>\r\n          <VueFileAgent class=\"mb-2\"\r\n                  ref=\"vueFileAgent\"\r\n                  @select=\"filesSelected($event)\"\r\n                  :multiple=\"false\"\r\n                  :maxSize=\"'5MB'\"\r\n                  :deletable=\"true\"\r\n                  :accept=\"'image/*,'\"\r\n                  :theme=\"'list'\"\r\n                  @beforedelete=\"onBeforeDelete($event)\"\r\n                  @delete=\"fileDeleted($event)\"\r\n                  :errorText=\"{\r\n                    type: 'Invalid file type. Only image file is allowed',\r\n                    size: 'Image should not exceed 5MB in size',\r\n                  }\"\r\n              v-model=\"fileRecords\"\r\n            ></VueFileAgent>\r\n           <label for=\"posttitle\" class=\"mt-1\">Enter Title</label>\r\n           <input v-model=\"data.title\" type=\"text\" class=\"form-control\" id=\"posttitle\" placeholder=\" \">\r\n           <label for=\"postexcerpt\" class=\"mt-1\">Post Excerpt</label>\r\n           <textarea v-model=\"data.post_excerpt\" type=\"text\" class=\"form-control\" id=\"postexcerpt\" placeholder=\" \"></textarea>\r\n           <label for=\"updatecontent\" class=\"mt-2\">Content</label>\r\n         </div>\r\n         <vue-editor\r\n            id=\"editor\"\r\n            :customModules=\"customModulesForEditor\"\r\n            :editorOptions=\"editorSettings\"\r\n            :editorToolbar=\"customToolbar\"\r\n            useCustomImageHandler\r\n            v-model=\"data.content\"\r\n            @image-added=\"handleImageAdded\"\r\n          />\r\n          <div class=\"d-flex mt-3\">\r\n           <button type=\"submit\" class=\"btn btn-success btn-sm me-1\">Save Post</button>\r\n           <a @click.prevent=\"$router.back()\" href=\"\" class=\"btn btn-secondary btn-sm\">Cancel</a>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n   </div>\r\n  </div>\r\n </div>\r\n</template>\r\n<script>\r\nimport { VueEditor } from \"vue2-editor\";\r\nimport ImageResize from \"quill-image-resize-vue\";\r\nimport { ImageDrop } from \"quill-image-drop-module\";\r\nimport {mapActions} from 'vuex'\r\nexport default {\r\n components: { VueEditor },\r\n data(){\r\n  return {\r\n   customModulesForEditor: [\r\n     { alias: \"imageDrop\", module: ImageDrop },\r\n     { alias: \"imageResize\", module: ImageResize },\r\n   ],\r\n   fileRecords: [],\r\n   fileRecordsForUpload: [],\r\n   editorSettings: {\r\n     modules: {\r\n       imageDrop: true,\r\n       imageResize: {},\r\n     },\r\n   },\r\n   customToolbar: [\r\n     [{ header: [false, 1, 2, 3, 4, 5, 6] }],\r\n     [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n     [\r\n       { align: \"\" },\r\n       { align: \"center\" },\r\n       { align: \"right\" },\r\n       { align: \"justify\" },\r\n     ],\r\n     [\"blockquote\", \"code-block\"],\r\n     [{ list: \"ordered\" }, { list: \"bullet\" }, { list: \"check\" }],\r\n     [{ script: \"sub\" }, { script: \"super\" }],\r\n     [{ color: [] }, { background: [] }],\r\n     [\"link\", \"image\"],\r\n     [\"clean\"],\r\n   ],\r\n   data: {\r\n    title: '',\r\n    content: '',\r\n    post_excerpt: '',\r\n   },\r\n  }\r\n },\r\n async mounted(){\r\n  document.title = \"Create Post - Touchless Information Management\"\r\n   this.isLoading = true;\r\n   this.initialLoading = true;\r\n   await this.checkAuthUser();\r\n   this.initialLoading = false;\r\n   this.isLoading = false;\r\n },\r\n methods: {\r\n    ...mapActions('auth', ['checkAuthUser']),\r\n  filesSelected: function(fileRecordsNewlySelected) {\r\n     var validFileRecords = fileRecordsNewlySelected.filter(\r\n     (fileRecord) => !fileRecord.error\r\n     );\r\n     this.fileRecordsForUpload = this.fileRecordsForUpload.concat(\r\n     validFileRecords\r\n     );\r\n  },\r\n  fileDeleted: function(fileRecord) {\r\n    var i = this.fileRecordsForUpload.indexOf(fileRecord);\r\n    if (i !== -1) {\r\n      this.fileRecordsForUpload.splice(i, 1);\r\n    }\r\n  },\r\n  onBeforeDelete: function(fileRecord) {\r\n    console.log(fileRecord)\r\n    var i = this.fileRecordsForUpload.indexOf(fileRecord);\r\n    if (i !== -1) {\r\n      this.fileRecordsForUpload.splice(i, 1);\r\n     var k = this.fileRecords.indexOf(fileRecord);\r\n      if (k !== -1) this.fileRecords.splice(k, 1);\r\n    }\r\n  },\r\n  handleImageAdded: function(file) {\r\n    var formData = new FormData();\r\n    formData.append(\"image\", file);\r\n  },\r\n  async savePost(){\r\n   if(this.data.title == '') return this.$toast.error('Title is required!');  \r\n   if(this.data.content == '') return this.$toast.error('Post content is required!');  \r\n   if(this.data.post_excerpt == '') return this.$toast.error('Post excerpt is required!');  \r\n\r\n   if(this.fileRecordsForUpload.length > 0) {\r\n     const img = await this.$refs.vueFileAgent.upload(\r\n       `http://127.0.0.1:8000/api/user/uploadPostImage?token=` + localStorage.getItem(\"auth\"), \r\n       {'X-Requested-With' : 'XMLHttpRequest'}, this.fileRecordsForUpload\r\n     );\r\n\r\n     this.data.image = img[0].data\r\n   }\r\n\r\n   this.isLoading = true\r\n\r\n   const res = await this.$store.dispatch('post/savePost', this.data)\r\n\r\n   if(res.status == 200 ){\r\n     this.$toast.success('Post added successfully!')\r\n     this.data = {title: '', content: ''}\r\n     this.$router.back()\r\n   }\r\n   this.isLoading = false\r\n  }\r\n },\r\n}\r\n</script>\r\n<style>\r\n@import \"~vue2-editor/dist/vue2-editor.css\";\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPost.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NewPost.vue?vue&type=template&id=422c09e5&\"\nimport script from \"./NewPost.vue?vue&type=script&lang=js&\"\nexport * from \"./NewPost.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NewPost.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NewPost.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}