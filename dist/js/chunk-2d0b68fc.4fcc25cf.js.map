{"version":3,"sources":["webpack:///./src/views/user/Post.vue?55f9","webpack:///src/views/user/Post.vue","webpack:///./src/views/user/Post.vue?6860","webpack:///./src/views/user/Post.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","_v","directives","name","rawName","value","expression","domProps","on","$event","target","composing","search_post","bordered","striped","_e","initialLoading","_s","posts","from","to","total","data","_l","post","i","key","preventDefault","viewPost","$bvModal","show","postcontent","imgURL","image","title","useraccount","userinfo","first_name","last_name","staticStyle","post_excerpt","status","_f","created_at","$can","approve_post","id","user_account_id","user","updatePost","deletePost","slot","scopedSlots","_u","fn","ref","cancel","isLoading","destroyPost","apply","arguments","content","views","approvePost","staticRenderFns","filters","moment","computed","methods","postSearch","getPost","page","searchPost","created","debouncedPostSearch","_","debounce","watch","component"],"mappings":"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","file":"js/chunk-2d0b68fc.4fcc25cf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4\"},[_c('div',{staticClass:\"row justify-content-center mt-3\"},[_c('div',{staticClass:\"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12\"},[_c('div',{staticClass:\"card p-5 mb-4\"},[_vm._m(0),_c('div',{staticClass:\"d-flex justify-content-end mt-2\"},[_c('router-link',{staticClass:\"btn btn-purple btn-sm me-2 d-flex align-items-center\",attrs:{\"to\":\"/user/post/create\"}},[_c('i',{staticClass:\"bi bi-plus-circle me-2\"}),_vm._v(\" New Post\")]),_c('div',{staticClass:\"col-7 col-sm-5 col-md-5 col-lg-4 col-xl-3\"},[_c('div',{staticClass:\"input-group form-floating\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.search_post),expression:\"search_post\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"floatingSearchOrg\",\"placeholder\":\"Search here\"},domProps:{\"value\":(_vm.search_post)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.search_post=$event.target.value}}}),_c('label',{attrs:{\"for\":\"floatingSearchOrg\"}},[_vm._v(\"Search here\")]),_vm._m(1)])])],1),_c('div',{staticClass:\"table-responsive mt-3\"},[(_vm.initialLoading)?_c('b-skeleton-table',{attrs:{\"rows\":4,\"columns\":7,\"table-props\":{ bordered: false, striped: true }}}):_vm._e(),(!_vm.initialLoading)?_c('table',{staticClass:\"table table-hover\"},[_c('caption',[_vm._v(\"Showing \"+_vm._s(_vm.posts.from)+\" to \"+_vm._s(_vm.posts.to)+\" out of \"+_vm._s(_vm.posts.total)+\" posts.\")]),_vm._m(2),_c('tbody',[(_vm.posts.data == 0 && !_vm.initialLoading)?_c('tr',[_c('td',{staticClass:\"text-center pt-3 pb-3\",attrs:{\"colspan\":\"6\"}},[_vm._v(\"No data available\")])]):_vm._l((_vm.posts.data),function(post,i){return _c('tr',{key:i},[_c('td',{on:{\"click\":function($event){$event.preventDefault();_vm.viewPost = post; _vm.$bvModal.show('viewPostModal')}}},[(post.postcontent.image)?_c('img',{attrs:{\"src\":_vm.imgURL + \"/\" + post.postcontent.image,\"alt\":\"\",\"width\":\"100\"}}):_c('p',{staticClass:\"text-muted\"},[_vm._v(\"No Image\")])]),_c('td',{staticClass:\"text-nowrap cursor-pointer\",on:{\"click\":function($event){$event.preventDefault();_vm.viewPost = post; _vm.$bvModal.show('viewPostModal')}}},[_vm._v(\" \"+_vm._s(post.postcontent.title)+\" \"),_c('br'),_c('span',{staticClass:\"text-muted\"},[_c('small',[_vm._v(\"Added by: \"+_vm._s(post.useraccount.userinfo.first_name)+\" \"+_vm._s(post.useraccount.userinfo.last_name))])])]),_c('td',{staticClass:\"cursor-pointer\",on:{\"click\":function($event){$event.preventDefault();_vm.viewPost = post; _vm.$bvModal.show('viewPostModal')}}},[_c('div',{staticStyle:{\"width\":\"250px\"}},[_vm._v(\" \"+_vm._s(post.postcontent.post_excerpt)+\" \")])]),_c('td',{staticClass:\"cursor-pointer\"},[_c('b-badge',{attrs:{\"variant\":post.status == 'Approved' ? 'success rounded-pill':'info rounded-pill'}},[_vm._v(_vm._s(post.status))])],1),_c('td',{staticClass:\"text-nowrap\"},[_vm._v(_vm._s(_vm._f(\"moment\")(post.created_at)))]),_c('td',[_c('div',{staticClass:\"d-flex\"},[(_vm.$can('approve_post') && post.status != 'Approved')?_c('button',{staticClass:\"btn btn-sm btn-success rounded-pill btn-approve me-2\",on:{\"click\":function($event){$event.preventDefault();_vm.approve_post.id = post.id; _vm.$bvModal.show('approvePostModal')}}},[_c('i',{staticClass:\"bi bi-check\"})]):_vm._e(),(post.user_account_id == _vm.user.id)?_c('button',{staticClass:\"btn btn-sm btn-success rounded-pill btn-approve me-2\",on:{\"click\":function($event){$event.preventDefault();return _vm.updatePost(post)}}},[_c('i',{staticClass:\"bi bi-pencil-square\"})]):_vm._e(),(_vm.$can('delete_post') || post.user_account_id == _vm.user.id)?_c('button',{staticClass:\"btn btn-sm btn-danger rounded-pill btn-approve me-2\",on:{\"click\":function($event){_vm.deletePost = post.id; _vm.$bvModal.show('deleteModal')}}},[_c('i',{staticClass:\"bi bi-trash\"})]):_vm._e()])])])})],2)]):_vm._e()],1),(_vm.posts.data)?_c('div',{staticClass:\"row mt-3\"},[_c('pagination',{attrs:{\"showDisabled\":true,\"align\":'right',\"data\":_vm.posts}},[_c('span',{attrs:{\"slot\":\"prev-nav\"},slot:\"prev-nav\"},[_vm._v(\"«\")]),_c('span',{attrs:{\"slot\":\"next-nav\"},slot:\"next-nav\"},[_vm._v(\"»\")])])],1):_vm._e()])])])]),_c('b-modal',{attrs:{\"id\":\"deleteModal\",\"centered\":\"\",\"title\":\"Confirm Delete\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(ref){\nvar cancel = ref.cancel;\nreturn [_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return cancel()}}},[_vm._v(\" Cancel \")]),_c('b-button',{attrs:{\"variant\":\"danger\",\"disabled\":_vm.isLoading},on:{\"click\":function($event){$event.preventDefault();return _vm.destroyPost.apply(null, arguments)}}},[_vm._v(\" Delete \")])]}}])},[_c('p',{},[_vm._v(\"Are you sure to delete this post?\")])]),_c('b-modal',{attrs:{\"id\":\"viewPostModal\",\"scrollable\":\"\",\"centered\":\"\",\"title\":_vm.viewPost.postcontent.title},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(ref){\nvar cancel = ref.cancel;\nreturn [_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return cancel()}}},[_vm._v(\" Close \")])]}}])},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.viewPost.postcontent.content)}}),(_vm.viewPost.useraccount)?_c('p',{staticClass:\" mt-3\"},[_c('small',[_vm._v(\"Added by: \"),_c('strong',[_vm._v(_vm._s(_vm.viewPost.useraccount.userinfo.first_name)+\" \"+_vm._s(_vm.viewPost.useraccount.userinfo.last_name))])])]):_vm._e(),_c('p',{},[_c('small',[_vm._v(_vm._s(_vm._f(\"moment\")(_vm.viewPost.created_at)))])]),_c('p',{},[_c('small',[_vm._v(\"Views: \"+_vm._s(_vm.viewPost.views))])])]),_c('b-modal',{attrs:{\"id\":\"approvePostModal\",\"centered\":\"\",\"title\":\"Confirm Approve\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(ref){\nvar cancel = ref.cancel;\nreturn [_c('b-button',{attrs:{\"disabled\":_vm.isLoading,\"variant\":\"primary\"},on:{\"click\":function($event){return cancel()}}},[_vm._v(\" Cancel \")]),_c('b-button',{attrs:{\"disabled\":_vm.isLoading,\"variant\":\"success\"},on:{\"click\":function($event){$event.preventDefault();return _vm.approvePost.apply(null, arguments)}}},[_vm._v(\" Approve \")])]}}])},[_c('p',{},[_vm._v(\"Are you sure you want to approve this post?\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex align-items-center\"},[_c('div',{staticClass:\"d-flex flex-column me-auto mt-2\"},[_c('h5',{staticClass:\"text-violet\"},[_vm._v(\"POSTS\")]),_c('p',{staticClass:\"mb-4\"},[_c('small',[_vm._v(\"Manage your posts below\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{staticClass:\"btn btn-purple\"},[_c('i',{staticClass:\"bi bi-search\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticClass:\"text-nowrap\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Image\")]),_c('th',{staticClass:\"text-nowrap\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Title\")]),_c('th',{staticClass:\"text-nowrap\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Post Excerpt\")]),_c('th',{staticClass:\"text-nowrap\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Status\")]),_c('th',{staticClass:\"text-nowrap\",attrs:{\"scope\":\"col\"}},[_vm._v(\"Date Posted\")]),_c('th',{attrs:{\"scope\":\"col\"}},[_vm._v(\"Actions\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n <div>\r\n    <div class=\"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4\">\r\n     <div class=\"row justify-content-center mt-3\">\r\n        <div class=\"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12\">\r\n          <div class=\"card p-5 mb-4\">\r\n            <div class=\"d-flex align-items-center\">\r\n              <div class=\"d-flex flex-column me-auto mt-2\">\r\n                <h5 class=\"text-violet\">POSTS</h5>\r\n                <p class=\"mb-4\"><small>Manage your posts below</small></p>\r\n              </div>\r\n            </div>\r\n            <div class=\"d-flex justify-content-end mt-2\">\r\n              <router-link to=\"/user/post/create\" class=\"btn btn-purple btn-sm me-2 d-flex align-items-center\"><i class=\"bi bi-plus-circle me-2\"></i> New Post</router-link>\r\n              <div class=\"col-7 col-sm-5 col-md-5 col-lg-4 col-xl-3\">\r\n                <div class=\"input-group form-floating\">\r\n                  <input v-model=\"search_post\" type=\"text\"  class=\"form-control\" id=\"floatingSearchOrg\" placeholder=\"Search here\">\r\n                  <label  for=\"floatingSearchOrg\" class=\"\">Search here</label>\r\n                  <button class=\"btn btn-purple\"><i class=\"bi bi-search\"></i></button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"table-responsive mt-3\">\r\n              <b-skeleton-table\r\n                  :rows=\"4\"\r\n                  :columns=\"7\"\r\n                  :table-props=\"{ bordered: false, striped: true }\"\r\n                  v-if=\"initialLoading\"\r\n                ></b-skeleton-table>\r\n              <table class=\"table table-hover\" v-if=\"!initialLoading\">\r\n                <caption>Showing {{posts.from}} to {{posts.to}} out of {{posts.total}} posts.</caption>\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\" class=\"text-nowrap\">Image</th>\r\n                    <th scope=\"col\" class=\"text-nowrap\">Title</th>\r\n                    <th scope=\"col\" class=\"text-nowrap\">Post Excerpt</th>\r\n                    <th scope=\"col\" class=\"text-nowrap\">Status</th>\r\n                    <th scope=\"col\" class=\"text-nowrap\">Date Posted</th>\r\n                    <th scope=\"col\">Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-if=\"posts.data == 0 && !initialLoading\">\r\n                    <td class=\"text-center pt-3 pb-3\" colspan=\"6\">No data available</td>\r\n                  </tr>\r\n                  <tr v-else v-for=\"(post, i) in posts.data\" :key=\"i\">\r\n                    <td v-on:click.prevent=\"viewPost = post; $bvModal.show('viewPostModal')\">\r\n                      <img v-if=\"post.postcontent.image\" :src=\"`${imgURL}/` + post.postcontent.image\" alt=\"\" class=\"\" width=\"100\"/>\r\n                      <p class=\"text-muted\" v-else>No Image</p>\r\n                    </td>\r\n                    <td class=\"text-nowrap cursor-pointer\" v-on:click.prevent=\"viewPost = post; $bvModal.show('viewPostModal')\">\r\n                      {{post.postcontent.title}} <br/>\r\n                      <span class=\"text-muted\"><small>Added by: {{post.useraccount.userinfo.first_name}} {{post.useraccount.userinfo.last_name}}</small></span>\r\n                    </td>\r\n                    <td class=\"cursor-pointer\" v-on:click.prevent=\"viewPost = post; $bvModal.show('viewPostModal')\">\r\n                      <div style=\"width: 250px\">\r\n                        {{post.postcontent.post_excerpt}}\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"cursor-pointer\">\r\n                      <b-badge :variant=\"post.status == 'Approved' ? 'success rounded-pill':'info rounded-pill'\">{{post.status}}</b-badge>\r\n                    </td>\r\n                    <td class=\"text-nowrap\">{{post.created_at | moment}}</td>\r\n                    <td>\r\n                      <div class=\"d-flex\">\r\n                        <button v-if=\"$can('approve_post') && post.status != 'Approved'\" v-on:click.prevent=\"approve_post.id = post.id; $bvModal.show('approvePostModal')\" class=\"btn btn-sm btn-success rounded-pill btn-approve me-2\" >\r\n                           <i class=\"bi bi-check\"></i>\r\n                        </button>\r\n                        <button v-if=\"post.user_account_id == user.id\" v-on:click.prevent=\"updatePost(post)\" class=\"btn btn-sm btn-success rounded-pill btn-approve me-2\" >\r\n                          <i class=\"bi bi-pencil-square\"></i>\r\n                        </button>\r\n                        <button v-if=\"$can('delete_post') || post.user_account_id == user.id\" @click=\"deletePost = post.id; $bvModal.show('deleteModal')\" class=\"btn btn-sm btn-danger rounded-pill btn-approve me-2\" >\r\n                          <i class=\"bi bi-trash\"></i>\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div class=\"row mt-3\" v-if=\"posts.data\">\r\n              <pagination :showDisabled=\"true\" :align=\"'right'\" :data=\"posts\">\r\n                <span slot=\"prev-nav\">&laquo;</span>\r\n                <span slot=\"next-nav\">&raquo;</span>\r\n              </pagination>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <b-modal id=\"deleteModal\" centered title=\"Confirm Delete\">\r\n        <p class=\"\">Are you sure to delete this post?</p>\r\n        <template #modal-footer = {cancel} >\r\n        <b-button variant=\"primary\" @click=\"cancel()\"> Cancel </b-button>\r\n        <b-button variant=\"danger\" v-on:click.prevent=\"destroyPost\" :disabled=\"isLoading\">\r\n            Delete\r\n        </b-button>\r\n        </template>\r\n    </b-modal>\r\n\r\n    <b-modal id=\"viewPostModal\" scrollable centered :title=\"viewPost.postcontent.title\">\r\n        <div v-html=\"viewPost.postcontent.content\"></div>\r\n        <p class=\" mt-3\" v-if=\"viewPost.useraccount\"><small>Added by: <strong>{{viewPost.useraccount.userinfo.first_name}} {{viewPost.useraccount.userinfo.last_name}}</strong></small></p>\r\n        <p class=\"\"><small>{{viewPost.created_at | moment}}</small></p>\r\n        <p class=\"\"><small>Views: {{viewPost.views}}</small></p>\r\n        <template #modal-footer = {cancel} >\r\n          <b-button variant=\"primary\" @click=\"cancel()\"> Close </b-button>\r\n        </template>\r\n    </b-modal>\r\n\r\n    <!--- APPROVE MODAL -->\r\n   <b-modal id=\"approvePostModal\" centered title=\"Confirm Approve\">\r\n    <p class=\"\">Are you sure you want to approve this post?</p>\r\n    <template #modal-footer=\"{cancel}\">\r\n     <b-button :disabled=\"isLoading\" variant=\"primary\" @click=\"cancel()\"> Cancel </b-button>\r\n     <b-button :disabled=\"isLoading\" variant=\"success\" v-on:click.prevent=\"approvePost\">\r\n      Approve\r\n     </b-button>\r\n    </template>\r\n   </b-modal>\r\n\r\n </div>\r\n</template>\r\n<script>\r\nimport { mapState, mapActions } from 'vuex';\r\nimport moment from 'moment'\r\nconst _ = require('lodash');\r\n\r\nexport default {\r\n    data(){\r\n    return {\r\n       viewPost: {\r\n         postcontent: {\r\n           title: '',\r\n           content: ''\r\n         },\r\n       },\r\n       initialLoading: false,\r\n       isLoading: false,\r\n       isSearching: false,\r\n       search_post: '',\r\n       approve_post: {\r\n         id: '',\r\n       },\r\n       post: {\r\n           title: '',\r\n           content: '',\r\n           image: '',\r\n       },\r\n       update: {\r\n           title: '',\r\n           content: '',\r\n           image: '',\r\n       },\r\n       deletePost: '',\r\n    }\r\n  },\r\n  filters: {\r\n    moment: function (date) {\r\n      return moment(date).format('MMM D, YYYY, h:mm a');\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('auth', ['user']),\r\n    ...mapState('post', ['posts','post_types']),\r\n  },\r\n  async mounted(){\r\n    document.title = 'Info Kiosk - Post Management'\r\n    this.initialLoading = true\r\n    await this.checkAuthUser()\r\n    await this.$store.dispatch('post/getPost', 1);\r\n    this.initialLoading = false\r\n  },\r\n  methods: {\r\n    ...mapActions('auth', ['checkAuthUser']),\r\n    async approvePost(){\r\n      const res = await this.$store.dispatch('post/approvePost', this.approve_post)\r\n      if(res.status == 200){\r\n        this.$toast.success('Post has been approved')\r\n      }\r\n      else {\r\n        this.$toast.error('Something went wrong')\r\n      }\r\n      this.$bvModal.hide('approvePostModal')\r\n    },\r\n    async updatePost(data){\r\n      this.$store.commit('post/SET_UPDATE_POST', data)\r\n      this.$router.push('/user/post/update')\r\n    },\r\n    async destroyPost(){\r\n        this.isLoading = true\r\n        const res = await this.$store.dispatch('post/deletePost', this.deletePost)\r\n        if(res.status == 200){\r\n            await this.$store.dispatch('post/getPost', 1);\r\n            this.$toast.success('Post deleted successfully!')\r\n            this.$bvModal.hide('deleteModal')\r\n        } else {\r\n            this.$toast.error('Something went wrong')\r\n        }\r\n        this.isLoading = false\r\n    },\r\n     async searchPost(page){\r\n      let data = {\r\n        search: this.search_post\r\n      }\r\n      this.isSearching = true\r\n      await this.$store.dispatch('post/searchPost', {page: page, data: data})\r\n      this.isSearching = false\r\n    },\r\n    async getPost(page){\r\n       await this.$store.dispatch('post/getPost', page);\r\n    },\r\n    postSearch(page = 1){\r\n      if(this.search_post == ''){\r\n        this.getPost(page)\r\n      }\r\n      else {\r\n        this.searchPost(page)\r\n      }\r\n    },\r\n  },\r\n  created: function () {\r\n    this.debouncedPostSearch = _.debounce(this.postSearch, 800)\r\n  },\r\n  watch: {\r\n    search_post(before, after){\r\n      this.debouncedPostSearch()\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Post.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Post.vue?vue&type=template&id=7a6a96b0&\"\nimport script from \"./Post.vue?vue&type=script&lang=js&\"\nexport * from \"./Post.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}