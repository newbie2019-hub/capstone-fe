{"version":3,"sources":["webpack:///./src/views/management/ActivityLogs.vue?138c","webpack:///src/views/management/ActivityLogs.vue","webpack:///./src/views/management/ActivityLogs.vue?2949","webpack:///./src/views/management/ActivityLogs.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","model","value","callback","$$v","filterLogs","expression","on","$event","_v","logs","logsFields","currentLogsPage","onFiltered","scopedSlots","_u","key","fn","proxy","row","selectedLog","item","$bvModal","show","_s","user","userinfo","first_name","last_name","log_name","badgeEvent","event","_f","created_at","length","ref","cancel","_l","properties","i","_e","ip","id","staticRenderFns","filters","moment","data","initialLoading","old","attributes","search","isSearching","methods","totalRows","filteredItems","computed","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,qDAAqD,CAACF,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,MAAM,CAACE,YAAY,kDAAkD,CAACF,EAAG,MAAM,CAACE,YAAY,iCAAiC,CAACN,EAAIO,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,gCAAgC,CAACF,EAAG,MAAM,CAACE,YAAY,8CAA8C,CAACF,EAAG,gBAAgB,CAACA,EAAG,eAAe,CAACI,MAAM,CAAC,GAAK,eAAe,KAAO,SAAS,YAAc,kBAAkBC,MAAM,CAACC,MAAOV,EAAc,WAAEW,SAAS,SAAUC,GAAMZ,EAAIa,WAAWD,GAAKE,WAAW,gBAAgBV,EAAG,uBAAuB,CAACA,EAAG,WAAW,CAACE,YAAY,uBAAuBE,MAAM,CAAC,QAAUR,EAAIa,YAAYE,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIa,WAAa,MAAM,CAACb,EAAIiB,GAAG,YAAY,IAAI,IAAI,KAAKb,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,YAAY,MAAQR,EAAIkB,KAAK,OAASlB,EAAIa,WAAW,iBAAiB,GAAG,yBAAyB,CAAC,OAAO,SAAS,aAAa,GAAG,OAASb,EAAImB,WAAW,WAAW,GAAG,eAAenB,EAAIoB,gBAAgB,QAAU,IAAIL,GAAG,CAAC,SAAWf,EAAIqB,YAAYC,YAAYtB,EAAIuB,GAAG,CAAC,CAACC,IAAI,gBAAgBC,GAAG,WAAW,MAAO,CAACzB,EAAIiB,GAAG,yBAAyBS,OAAM,GAAM,CAACF,IAAI,aAAaC,GAAG,SAASE,GAAK,MAAO,CAACvB,EAAG,MAAM,CAACE,YAAY,6BAA6BS,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAI4B,YAAcD,EAAIE,KAAM7B,EAAI8B,SAASC,KAAK,mBAAmB,CAAC/B,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGL,EAAIE,KAAKI,KAAKC,SAASC,YAAY,IAAInC,EAAIgC,GAAGL,EAAIE,KAAKI,KAAKC,SAASE,WAAW,UAAU,CAACZ,IAAI,iBAAiBC,GAAG,SAASE,GAAK,MAAO,CAACvB,EAAG,MAAM,CAACE,YAAY,6BAA6BS,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAI4B,YAAcD,EAAIE,KAAM7B,EAAI8B,SAASC,KAAK,mBAAmB,CAAC/B,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGL,EAAIE,KAAKQ,UAAU,UAAU,CAACb,IAAI,mBAAmBC,GAAG,SAASE,GAAK,MAAO,CAACvB,EAAG,QAAQ,CAACA,EAAG,UAAU,CAACI,MAAM,CAAC,QAAUR,EAAIsC,WAAWX,EAAIE,KAAKU,OAAO,KAAO,KAAK,CAACvC,EAAIiB,GAAGjB,EAAIgC,GAAGL,EAAIE,KAAKU,WAAW,MAAM,CAACf,IAAI,sBAAsBC,GAAG,SAASE,GAAK,MAAO,CAAC3B,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGhC,EAAIwC,GAAG,SAAPxC,CAAiB2B,EAAIE,KAAKY,aAAa,aAAa,GAAGrC,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,eAAe,CAACE,YAAY,OAAOE,MAAM,CAAC,aAAaR,EAAIkB,KAAKwB,OAAO,WAAW,GAAG,gBAAgB,aAAajC,MAAM,CAACC,MAAOV,EAAmB,gBAAEW,SAAS,SAAUC,GAAMZ,EAAIoB,gBAAgBR,GAAKE,WAAW,sBAAsB,WAAYd,EAAI4B,YAAgB,KAAExB,EAAG,UAAU,CAACI,MAAM,CAAC,GAAK,eAAe,WAAa,GAAG,SAAW,GAAG,MAAQ,YAAYc,YAAYtB,EAAIuB,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,SAASkB,GACllF,IAAIC,EAASD,EAAIC,OACjB,MAAO,CAACxC,EAAG,WAAW,CAACI,MAAM,CAAC,QAAU,WAAWO,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO4B,OAAY,CAAC5C,EAAIiB,GAAG,eAAe,MAAK,EAAM,aAAa,CAACb,EAAG,IAAI,GAAG,CAACA,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAG,cAAcjB,EAAIiB,GAAG,KAAKjB,EAAIgC,GAAGhC,EAAI4B,YAAYS,aAAajC,EAAG,IAAI,GAAG,CAACA,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAG,UAAUjB,EAAIiB,GAAG,KAAKjB,EAAIgC,GAAGhC,EAAI4B,YAAYK,KAAKC,SAASC,YAAY,IAAInC,EAAIgC,GAAGhC,EAAI4B,YAAYK,KAAKC,SAASE,cAAchC,EAAG,IAAI,GAAG,CAACA,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAG,gBAAgBjB,EAAIiB,GAAG,MAAMb,EAAG,QAAQ,CAACA,EAAG,UAAU,CAACI,MAAM,CAAC,QAAUR,EAAIsC,WAAWtC,EAAI4B,YAAYW,OAAO,KAAO,KAAK,CAACvC,EAAIiB,GAAGjB,EAAIgC,GAAGhC,EAAI4B,YAAYW,WAAW,KAA+B,WAAzBvC,EAAI4B,YAAYW,MAAoBnC,EAAG,MAAM,GAAG,CAACA,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACN,EAAIiB,GAAG,kBAAkBjB,EAAI6C,GAAI7C,EAAI4B,YAAYkB,WAAc,KAAE,SAASpC,EAAMc,EAAIuB,GAAG,OAAO3C,EAAG,MAAM,CAACoB,IAAIuB,GAAG,CAA8C3C,EAAG,IAAxC,cAAPoB,GAA8B,cAAPA,EAA4B,CAACpB,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGhC,EAAIwC,GAAG,SAAPxC,CAAiBU,MAAkB,CAACN,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGtB,YAAe,GAAGV,EAAIgD,KAA+B,gBAAzBhD,EAAI4B,YAAYW,OAAoD,UAAzBvC,EAAI4B,YAAYW,OAA8C,iBAAzBvC,EAAI4B,YAAYW,MAA0BnC,EAAG,MAAM,GAAG,CAACA,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACN,EAAIiB,GAAG,aAAab,EAAG,OAAO,CAACE,YAAY,aAAa,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGhC,EAAI4B,YAAYkB,WAAWG,WAAWjD,EAAIgD,KAA+B,mBAAzBhD,EAAI4B,YAAYW,MAA4BnC,EAAG,MAAM,GAAG,CAACA,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACN,EAAIiB,GAAG,qBAAqBjB,EAAI6C,GAAI7C,EAAI4B,YAAsB,YAAE,SAASlB,EAAMc,EAAIuB,GAAG,OAAO3C,EAAG,MAAM,CAACoB,IAAIuB,GAAG,CAA8C3C,EAAG,IAAxC,cAAPoB,GAA8B,cAAPA,EAA4B,CAACpB,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGhC,EAAIwC,GAAG,SAAPxC,CAAiBU,MAAkB,CAACN,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGtB,YAAe,GAAGV,EAAIgD,KAA+B,WAAzBhD,EAAI4B,YAAYW,MAAoBnC,EAAG,MAAM,GAAG,CAACA,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACN,EAAIiB,GAAG,kBAAkBjB,EAAI6C,GAAI7C,EAAI4B,YAAYkB,WAAqB,YAAE,SAASpC,EAAMc,EAAIuB,GAAG,OAAO3C,EAAG,MAAM,CAACoB,IAAIuB,GAAG,CAA8C3C,EAAG,IAAxC,cAAPoB,GAA8B,cAAPA,EAA4B,CAACpB,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGhC,EAAIwC,GAAG,SAAPxC,CAAiBU,MAAkB,CAACN,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGtB,YAAe,GAAGV,EAAIgD,KAA+B,WAAzBhD,EAAI4B,YAAYW,MAAoBnC,EAAG,MAAM,GAAG,CAACA,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACN,EAAIiB,GAAG,cAAcjB,EAAI6C,GAAI7C,EAAI4B,YAAYkB,WAAqB,YAAE,SAASpC,EAAMc,EAAIuB,GAAG,OAAO3C,EAAG,MAAM,CAACoB,IAAIuB,GAAG,CAA8C3C,EAAG,IAAxC,cAAPoB,GAA8B,cAAPA,EAA4B,CAACpB,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGhC,EAAIwC,GAAG,SAAPxC,CAAiBU,MAAkB,CAACN,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGtB,WAAcN,EAAG,KAAK,CAACE,YAAY,qBAAqB,CAACN,EAAIiB,GAAG,cAAcjB,EAAI6C,GAAI7C,EAAI4B,YAAYkB,WAAc,KAAE,SAASpC,EAAMc,GAAK,OAAOpB,EAAG,MAAM,CAACoB,IAAIA,EAAI0B,IAAI,CAA8C9C,EAAG,IAAxC,cAAPoB,GAA8B,cAAPA,EAA4B,CAACpB,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGhC,EAAIwC,GAAG,SAAPxC,CAAiBU,MAAkB,CAACN,EAAG,OAAO,CAACE,YAAY,WAAW,CAACN,EAAIiB,GAAGjB,EAAIgC,GAAGR,GAAK,OAAOxB,EAAIiB,GAAG,IAAIjB,EAAIgC,GAAGtB,YAAe,GAAGV,EAAIgD,OAAOhD,EAAIgD,MAAM,IACpvGG,EAAkB,CAAC,WAAa,IAAInD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACF,EAAG,KAAK,CAACJ,EAAIiB,GAAG,mBAAmBb,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACF,EAAG,QAAQ,CAACJ,EAAIiB,GAAG,sD,qEC6GvP,GAFA,UAEA,CACEmC,QAAS,CACPC,OAAQ,SAAZ,GACM,OAAO,IAAb,oCAGEC,KANF,WAOI,MAAO,CACLC,gBAAgB,EAChB3B,YAAa,CACXK,KAAM,CACJC,SAAU,CACRC,WAAY,GACZC,UAAW,KAGfU,WAAY,CACVU,IAAK,CACHF,KAAM,IAERG,WAAY,CACVH,KAAM,MAIZI,OAAQ,GACRC,aAAa,EACbvC,gBAAiB,EACjBP,WAAY,KACZM,WAAY,CAClB,CACQ,IAAR,QAEA,CACQ,IAAR,YAEA,CACQ,IAAR,cAEA,CACQ,IAAR,eAEA,CACQ,IAAR,oBAKE,QAhDF,WAgDA,+JACA,oBACA,4CAFA,SAGA,6CAHA,OAIA,oBAJA,8CAMEyC,QAAS,CACPtB,WADJ,SACA,GACM,OAAQC,GACN,IAAK,UACH,MAAO,UACT,IAAK,kBACH,MAAO,SACT,IAAK,UACH,MAAO,SACT,IAAK,UACH,MAAO,UACT,IAAK,gBACH,MAAO,UACT,IAAK,eACH,MAAO,SACT,QACE,QAGNlB,WAnBJ,SAmBA,GACMpB,KAAK4D,UAAYC,EAAcpB,OAC/BzC,KAAKmB,gBAAkB,GAEzB,QAvBJ,WAuBA,6NACA,+CADA,+CAIE2C,SAAU,OAAZ,OAAY,CAAZ,GACA,mCClMqW,I,YCOjWC,EAAY,eACd,EACAjE,EACAoD,GACA,EACA,KACA,KACA,MAIa,aAAAa,E","file":"js/chunk-2d217ffc.838eb7ee.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container pe-sm-0 ps-sm-0 pe-md-2 pe-lg-4 pe-xl-4\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12\"},[_c('div',{staticClass:\"card pe-5 ps-5 pb-4 pt-5 mb-4\"},[_vm._m(0),_c('div',{staticClass:\"row justify-content-end mb-3\"},[_c('div',{staticClass:\"col-10 col-sm-8 col-md-6 col-lg-5 col-xl-4\"},[_c('b-input-group',[_c('b-form-input',{attrs:{\"id\":\"filter-input\",\"type\":\"search\",\"placeholder\":\"Type to Search\"},model:{value:(_vm.filterLogs),callback:function ($$v) {_vm.filterLogs=$$v},expression:\"filterLogs\"}}),_c('b-input-group-append',[_c('b-button',{staticClass:\"rounded-0 btn-purple\",attrs:{\"filter\":!_vm.filterLogs},on:{\"click\":function($event){_vm.filterLogs = ''}}},[_vm._v(\"Clear\")])],1)],1)],1)]),_c('div',{staticClass:\"table-responsive mt-3\"},[_c('b-table',{attrs:{\"id\":\"logstable\",\"items\":_vm.logs,\"filter\":_vm.filterLogs,\"sort-icon-left\":\"\",\"filter-included-fields\":['user','event'],\"show-empty\":\"\",\"fields\":_vm.logsFields,\"per-page\":10,\"current-page\":_vm.currentLogsPage,\"striped\":\"\"},on:{\"filtered\":_vm.onFiltered},scopedSlots:_vm._u([{key:\"table-caption\",fn:function(){return [_vm._v(\"Users activity logs\")]},proxy:true},{key:\"cell(user)\",fn:function(row){return [_c('div',{staticClass:\"text-nowrap cursor-pointer\",on:{\"click\":function($event){_vm.selectedLog = row.item; _vm.$bvModal.show('logInfoModal')}}},[_vm._v(\" \"+_vm._s(row.item.user.userinfo.first_name)+\" \"+_vm._s(row.item.user.userinfo.last_name)+\" \")])]}},{key:\"cell(activity)\",fn:function(row){return [_c('div',{staticClass:\"text-nowrap cursor-pointer\",on:{\"click\":function($event){_vm.selectedLog = row.item; _vm.$bvModal.show('logInfoModal')}}},[_vm._v(\" \"+_vm._s(row.item.log_name)+\" \")])]}},{key:\"cell(event_type)\",fn:function(row){return [_c('small',[_c('b-badge',{attrs:{\"variant\":_vm.badgeEvent(row.item.event),\"pill\":\"\"}},[_vm._v(_vm._s(row.item.event))])],1)]}},{key:\"cell(date_and_time)\",fn:function(row){return [_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(row.item.created_at))+\" \")]}}])})],1),_c('div',{staticClass:\"d-flex justify-content-end\"},[_c('b-pagination',{staticClass:\"mt-1\",attrs:{\"total-rows\":_vm.logs.length,\"per-page\":10,\"aria-controls\":\"logstable\"},model:{value:(_vm.currentLogsPage),callback:function ($$v) {_vm.currentLogsPage=$$v},expression:\"currentLogsPage\"}})],1)])])])]),(_vm.selectedLog.user)?_c('b-modal',{attrs:{\"id\":\"logInfoModal\",\"scrollable\":\"\",\"centered\":\"\",\"title\":\"Log Info\"},scopedSlots:_vm._u([{key:\"modal-footer\",fn:function(ref){\nvar cancel = ref.cancel;\nreturn [_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":function($event){return cancel()}}},[_vm._v(\"Close\")])]}}],null,false,2708092184)},[_c('p',{},[_c('span',{staticClass:\"fw-bold\"},[_vm._v(\"Activity\")]),_vm._v(\": \"+_vm._s(_vm.selectedLog.log_name))]),_c('p',{},[_c('span',{staticClass:\"fw-bold\"},[_vm._v(\"User\")]),_vm._v(\": \"+_vm._s(_vm.selectedLog.user.userinfo.first_name)+\" \"+_vm._s(_vm.selectedLog.user.userinfo.last_name))]),_c('p',{},[_c('span',{staticClass:\"fw-bold\"},[_vm._v(\"Event Type\")]),_vm._v(\": \"),_c('small',[_c('b-badge',{attrs:{\"variant\":_vm.badgeEvent(_vm.selectedLog.event),\"pill\":\"\"}},[_vm._v(_vm._s(_vm.selectedLog.event))])],1)]),(_vm.selectedLog.event == 'deleted')?_c('div',{},[_c('h6',{staticClass:\"mt-3 fw-bold mb-2\"},[_vm._v(\"Deleted Data\")]),_vm._l((_vm.selectedLog.properties.old),function(value,key,i){return _c('div',{key:i},[(key == 'created_at' || key == 'updated_at')?_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(value)))]):_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(value))])])})],2):_vm._e(),(_vm.selectedLog.event == 'login failed' || _vm.selectedLog.event == 'logout' || _vm.selectedLog.event == 'login success')?_c('div',{},[_c('h6',{staticClass:\"fw-bold mt-1 mb-2\"},[_vm._v(\"User IP: \"),_c('span',{staticClass:\"fw-normal\"},[_vm._v(_vm._s(_vm.selectedLog.properties.ip))])])]):_vm._e(),(_vm.selectedLog.event == 'deleted account')?_c('div',{},[_c('h6',{staticClass:\"mt-3 fw-bold mb-2\"},[_vm._v(\"Deleted Account\")]),_vm._l((_vm.selectedLog.properties),function(value,key,i){return _c('div',{key:i},[(key == 'created_at' || key == 'updated_at')?_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(value)))]):_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(value))])])})],2):_vm._e(),(_vm.selectedLog.event == 'created')?_c('div',{},[_c('h6',{staticClass:\"mt-3 fw-bold mb-2\"},[_vm._v(\"Data Created\")]),_vm._l((_vm.selectedLog.properties.attributes),function(value,key,i){return _c('div',{key:i},[(key == 'created_at' || key == 'updated_at')?_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(value)))]):_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(value))])])})],2):_vm._e(),(_vm.selectedLog.event == 'updated')?_c('div',{},[_c('h6',{staticClass:\"mt-3 fw-bold mb-2\"},[_vm._v(\"New Data\")]),_vm._l((_vm.selectedLog.properties.attributes),function(value,key,i){return _c('div',{key:i},[(key == 'created_at' || key == 'updated_at')?_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(value)))]):_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(value))])])}),_c('h6',{staticClass:\"mt-3 fw-bold mb-2\"},[_vm._v(\"Old Data\")]),_vm._l((_vm.selectedLog.properties.old),function(value,key){return _c('div',{key:key.id},[(key == 'created_at' || key == 'updated_at')?_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(_vm._f(\"moment\")(value)))]):_c('p',[_c('span',{staticClass:\"fw-bold\"},[_vm._v(_vm._s(key)+\":\")]),_vm._v(\" \"+_vm._s(value))])])})],2):_vm._e()]):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex flex-column me-auto mt-2\"},[_c('h5',[_vm._v(\"Activity Logs\")]),_c('p',{staticClass:\"mb-4\"},[_c('small',[_vm._v(\"Listed below are the activity of the users\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n <div>\r\n   <div class=\"container pe-sm-0 ps-sm-0 pe-md-2 pe-lg-4 pe-xl-4\">\r\n   <div class=\"row justify-content-center\">\r\n    <div class=\"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12\">\r\n     <div class=\"card pe-5 ps-5 pb-4 pt-5 mb-4\">\r\n       <div class=\"d-flex flex-column me-auto mt-2\">\r\n        <h5>Activity Logs</h5>\r\n        <p class=\"mb-4\"><small>Listed below are the activity of the users</small></p>\r\n       </div>\r\n        <div class=\"row justify-content-end mb-3\">\r\n          <div class=\"col-10 col-sm-8 col-md-6 col-lg-5 col-xl-4\">\r\n            <b-input-group>\r\n              <b-form-input id=\"filter-input\" v-model=\"filterLogs\" type=\"search\" placeholder=\"Type to Search\"></b-form-input>\r\n              <b-input-group-append>\r\n                <b-button class=\"rounded-0 btn-purple\" :filter=\"!filterLogs\" @click=\"filterLogs = ''\">Clear</b-button>\r\n              </b-input-group-append>\r\n            </b-input-group>\r\n          </div>\r\n        </div>\r\n       <div class=\"table-responsive mt-3\">\r\n          <b-table id=\"logstable\" :items=\"logs\" @filtered=\"onFiltered\" :filter=\"filterLogs\" sort-icon-left :filter-included-fields=\"['user','event']\" show-empty :fields=\"logsFields\" :per-page=\"10\" :current-page=\"currentLogsPage\" striped>\r\n            <template #table-caption>Users activity logs</template>\r\n            <template #cell(user)=\"row\">\r\n              <div class=\"text-nowrap cursor-pointer\" @click=\"selectedLog = row.item; $bvModal.show('logInfoModal')\">\r\n                {{row.item.user.userinfo.first_name}} {{row.item.user.userinfo.last_name}}\r\n              </div>\r\n            </template>\r\n            <template #cell(activity)=\"row\">\r\n              <div class=\"text-nowrap cursor-pointer\" @click=\"selectedLog = row.item; $bvModal.show('logInfoModal')\">\r\n                {{row.item.log_name}}\r\n              </div>\r\n            </template>\r\n            <template #cell(event_type)=\"row\" >\r\n                <small><b-badge :variant=\"badgeEvent(row.item.event)\" pill>{{row.item.event}}</b-badge></small>\r\n            </template>\r\n            <template #cell(date_and_time)=\"row\">\r\n               {{row.item.created_at | moment}}\r\n            </template>\r\n          </b-table>\r\n        </div>\r\n        <div class=\"d-flex justify-content-end\">\r\n          <b-pagination\r\n            class=\"mt-1\"\r\n            v-model=\"currentLogsPage\"\r\n            :total-rows=\"logs.length\"\r\n            :per-page=\"10\"\r\n            aria-controls=\"logstable\"\r\n          ></b-pagination>\r\n        </div>\r\n     </div>\r\n    </div>\r\n   </div>\r\n  </div>\r\n\r\n  <!-- LOG INFO MODAL --->\r\n  <b-modal id=\"logInfoModal\" scrollable centered title=\"Log Info\" v-if=\"selectedLog.user\">\r\n      <p class=\"\"><span class=\"fw-bold\">Activity</span>:  {{selectedLog.log_name}}</p>\r\n      <p class=\"\"><span class=\"fw-bold\">User</span>: {{selectedLog.user.userinfo.first_name}} {{selectedLog.user.userinfo.last_name}}</p>\r\n      <p class=\"\"><span class=\"fw-bold\">Event Type</span>: <small><b-badge :variant=\"badgeEvent(selectedLog.event)\" pill>{{selectedLog.event}}</b-badge></small></p>\r\n      \r\n      <div v-if=\"selectedLog.event == 'deleted'\" class=\"\">\r\n        <h6 class=\"mt-3 fw-bold mb-2\">Deleted Data</h6>\r\n        <div v-for=\"(value, key, i) in selectedLog.properties.old\" :key=\"i\">\r\n          <p v-if=\"key == 'created_at' || key == 'updated_at'\"><span class=\"fw-bold\">{{key}}:</span> {{value | moment}}</p>\r\n          <p v-else><span class=\"fw-bold\">{{key}}:</span> {{value}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"selectedLog.event == 'login failed' || selectedLog.event == 'logout' || selectedLog.event == 'login success'\" class=\"\">\r\n        <h6 class=\"fw-bold mt-1 mb-2\">User IP: <span class=\"fw-normal\">{{selectedLog.properties.ip}}</span></h6>\r\n      </div>\r\n\r\n      <div v-if=\"selectedLog.event == 'deleted account'\" class=\"\">\r\n        <h6 class=\"mt-3 fw-bold mb-2\">Deleted Account</h6>\r\n        <div v-for=\"(value, key, i) in selectedLog.properties\" :key=\"i\">\r\n          <p v-if=\"key == 'created_at' || key == 'updated_at'\"><span class=\"fw-bold\">{{key}}:</span> {{value | moment}}</p>\r\n          <p v-else><span class=\"fw-bold\">{{key}}:</span> {{value}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"selectedLog.event == 'created'\" class=\"\">\r\n        <h6 class=\"mt-3 fw-bold mb-2\">Data Created</h6>\r\n        <div v-for=\"(value, key, i) in selectedLog.properties.attributes\" :key=\"i\">\r\n          <p v-if=\"key == 'created_at' || key == 'updated_at'\"><span class=\"fw-bold\">{{key}}:</span> {{value | moment}}</p>\r\n          <p v-else><span class=\"fw-bold\">{{key}}:</span> {{value}}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"selectedLog.event == 'updated'\" class=\"\">\r\n        <h6 class=\"mt-3 fw-bold mb-2\">New Data</h6>\r\n        <div v-for=\"(value, key, i) in selectedLog.properties.attributes\" :key=\"i\">\r\n          <p v-if=\"key == 'created_at' || key == 'updated_at'\"><span class=\"fw-bold\">{{key}}:</span> {{value | moment}}</p>\r\n          <p v-else><span class=\"fw-bold\">{{key}}:</span> {{value}}</p>\r\n        </div>\r\n        <h6 class=\"mt-3 fw-bold mb-2\">Old Data</h6>\r\n        <div v-for=\"(value, key) in selectedLog.properties.old\" :key=\"key.id\">\r\n          <p v-if=\"key == 'created_at' || key == 'updated_at'\"><span class=\"fw-bold\">{{key}}:</span> {{value | moment}}</p>\r\n          <p v-else><span class=\"fw-bold\">{{key}}:</span> {{value}}</p>\r\n        </div>\r\n      </div>\r\n      <template #modal-footer = {cancel} >\r\n      <b-button variant=\"primary\" @click=\"cancel()\">Close</b-button>\r\n      </template>\r\n  </b-modal>\r\n </div>\r\n</template>\r\n<script>\r\nimport {mapState} from 'vuex'\r\nimport moment from 'moment'\r\nconst _ = require('lodash');\r\n\r\nexport default {\r\n  filters: {\r\n    moment: function (date) {\r\n      return moment(date).format('MMMM D, YYYY, h:mm a');\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n      initialLoading: false,\r\n      selectedLog: {\r\n        user: {\r\n          userinfo: {\r\n            first_name: '',\r\n            last_name: '',   \r\n          }\r\n        },\r\n        properties: {\r\n          old: {\r\n            data: ''\r\n          },\r\n          attributes: {\r\n            data: ''\r\n          }\r\n        }\r\n      },\r\n      search: '',\r\n      isSearching: false,\r\n      currentLogsPage: 1,\r\n      filterLogs: null,\r\n      logsFields: [\r\n        {\r\n          key: 'user',\r\n        },\r\n        {\r\n          key: 'activity',\r\n        },\r\n        {\r\n          key: 'event_type',\r\n        },\r\n        {\r\n          key: 'description',\r\n        },\r\n        {\r\n          key: 'date_and_time',\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.initialLoading = true\r\n    document.title = \"Activity Logs - Management\"\r\n    await this.$store.dispatch('logs/getAllActivityLogs')\r\n    this.initialLoading = false\r\n  },\r\n  methods: {\r\n    badgeEvent(event){\r\n      switch (event) {\r\n        case 'created':\r\n          return 'success'\r\n        case 'deleted account':\r\n          return 'danger'\r\n        case 'deleted':\r\n          return 'danger'\r\n        case 'updated':\r\n          return 'primary'\r\n        case 'login success':\r\n          return 'success'\r\n        case 'login failed':\r\n          return 'danger'\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    onFiltered(filteredItems) {\r\n      this.totalRows = filteredItems.length\r\n      this.currentLogsPage = 1\r\n    },\r\n    async getLogs(page = 1){\r\n      await this.$store.dispatch('logs/getAllActivityLogs', page)\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState('logs', ['logs'])\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityLogs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ActivityLogs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ActivityLogs.vue?vue&type=template&id=2983771f&\"\nimport script from \"./ActivityLogs.vue?vue&type=script&lang=js&\"\nexport * from \"./ActivityLogs.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}