(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b68fc"],{"1e4f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4"},[s("div",{staticClass:"row justify-content-center mt-3"},[s("div",{staticClass:"col-12 col-sm-11 col-md-12 col-lg-12 col-xl-12"},[s("div",{staticClass:"card p-4 mb-4"},[t._m(0),s("div",{staticClass:"d-flex justify-content-end mt-2"},[s("router-link",{staticClass:"btn btn-purple btn-sm me-2 d-flex align-items-center",attrs:{to:"/user/post/create"}},[s("i",{staticClass:"bi bi-plus-circle me-2"}),t._v(" New Post")]),s("div",{staticClass:"col-6 col-sm-5 col-md-5 col-lg-4 col-xl-3"},[s("div",{staticClass:"input-group form-floating"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_post,expression:"search_post"}],staticClass:"form-control",attrs:{type:"text",id:"floatingSearchOrg",placeholder:"Search here"},domProps:{value:t.search_post},on:{input:function(e){e.target.composing||(t.search_post=e.target.value)}}}),s("label",{attrs:{for:"floatingSearchOrg"}},[t._v("Search here")]),t._m(1)])])],1),s("div",{staticClass:"table-responsive mt-3"},[0==t.posts?s("div",[t._v("No Posts found")]):t._e(),t.initialLoading?s("b-skeleton-table",{attrs:{rows:4,columns:7,"table-props":{bordered:!1,striped:!0}}}):t._e(),t.initialLoading?t._e():s("table",{staticClass:"table table-hover"},[s("caption",[t._v("Showing "+t._s(t.posts.from)+" to "+t._s(t.posts.to)+" out of "+t._s(t.posts.total)+" posts.")]),t._m(2),s("tbody",t._l(t.posts.data,(function(e,a){return s("tr",{key:a},[s("td",{on:{click:function(s){s.preventDefault(),t.viewPost=e,t.$bvModal.show("viewPostModal")}}},[e.postcontent.image?s("img",{attrs:{src:"http://127.0.0.1:8000/uploads/"+e.postcontent.image,alt:"",width:"100"}}):s("p",{staticClass:"text-muted"},[t._v("No Image")])]),s("td",{staticClass:"text-nowrap cursor-pointer",on:{click:function(s){s.preventDefault(),t.viewPost=e,t.$bvModal.show("viewPostModal")}}},[t._v(" "+t._s(e.postcontent.title)+" "),s("br"),s("span",{staticClass:"text-muted"},[s("small",[t._v("Added by: "+t._s(e.useraccount.userinfo.first_name)+" "+t._s(e.useraccount.userinfo.last_name))])])]),s("td",{staticClass:"cursor-pointer",on:{click:function(s){s.preventDefault(),t.viewPost=e,t.$bvModal.show("viewPostModal")}}},[t._v(t._s(e.postcontent.post_excerpt))]),s("td",{staticClass:"cursor-pointer"},[s("b-badge",{attrs:{variant:"Approved"==e.status?"success rounded-pill":"info rounded-pill"}},[t._v(t._s(e.status))])],1),s("td",{staticClass:"text-nowrap"},[t._v(t._s(t._f("moment")(e.created_at)))]),s("td",[s("div",{staticClass:"d-flex"},[t.$can("approve_post")&&"Approved"!=e.status?s("button",{staticClass:"btn btn-sm btn-success rounded-pill btn-approve me-2",on:{click:function(s){s.preventDefault(),t.approve_post.id=e.id,t.$bvModal.show("approvePostModal")}}},[s("i",{staticClass:"bi bi-check"})]):t._e(),e.user_account_id==t.user.id?s("button",{staticClass:"btn btn-sm btn-success rounded-pill btn-approve me-2",on:{click:function(s){return s.preventDefault(),t.updatePost(e)}}},[s("i",{staticClass:"bi bi-pencil-square"})]):t._e(),t.$can("delete_post")||e.user_account_id==t.user.id?s("button",{staticClass:"btn btn-sm btn-danger rounded-pill btn-approve me-2",on:{click:function(s){t.deletePost=e.id,t.$bvModal.show("deleteModal")}}},[s("i",{staticClass:"bi bi-trash"})]):t._e()])])])})),0)])],1),t.posts.data?s("div",{staticClass:"row mt-3"},[s("pagination",{attrs:{showDisabled:!0,align:"right",data:t.posts}},[s("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[t._v("«")]),s("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[t._v("»")])])],1):t._e()])])])]),s("b-modal",{attrs:{id:"deleteModal",centered:"",title:"Confirm Delete"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),s("b-button",{attrs:{variant:"danger",disabled:t.isLoading},on:{click:function(e){return e.preventDefault(),t.destroyPost.apply(null,arguments)}}},[t._v(" Delete ")])]}}])},[s("p",{},[t._v("Are you sure to delete this post?")])]),s("b-modal",{attrs:{id:"viewPostModal",size:"lg",scrollable:"",centered:"",title:t.viewPost.postcontent.title},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Close ")])]}}])},[s("div",{domProps:{innerHTML:t._s(t.viewPost.postcontent.content)}}),t.viewPost.useraccount?s("p",{staticClass:" mt-3"},[s("small",[t._v("Added by: "),s("strong",[t._v(t._s(t.viewPost.useraccount.userinfo.first_name)+" "+t._s(t.viewPost.useraccount.userinfo.last_name))])])]):t._e(),s("p",{},[s("small",[t._v("Views: "+t._s(t.viewPost.views))])]),s("p",{staticClass:"text-muted mb-2"},[s("small",[t._v("Date Posted: "+t._s(t._f("moment")(t.viewPost.created_at)))])])]),s("b-modal",{attrs:{id:"approvePostModal",centered:"",title:"Confirm Approve"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{disabled:t.isLoading,variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),s("b-button",{attrs:{disabled:t.isLoading,variant:"success"},on:{click:function(e){return e.preventDefault(),t.approvePost.apply(null,arguments)}}},[t._v(" Approve ")])]}}])},[s("p",{},[t._v("Are you sure you want to approve this post?")])])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticClass:"d-flex flex-column me-auto mt-2"},[s("h5",{staticClass:"text-violet"},[t._v("POSTS")]),s("p",{staticClass:"mb-4"},[s("small",[t._v("Manage your posts below")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-purple"},[s("i",{staticClass:"bi bi-search"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Image")]),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Title")]),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Post Excerpt")]),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Status")]),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Date Posted")]),s("th",{attrs:{scope:"col"}},[t._v("Actions")])])])}],n=s("1da1"),r=s("5530"),i=(s("96cf"),s("2f62")),c=s("c1df"),l=s.n(c),u={data:function(){return{viewPost:{postcontent:{title:"",content:""}},initialLoading:!1,isLoading:!1,isSearching:!1,search_post:"",approve_post:{id:""},post:{title:"",content:"",image:""},update:{title:"",content:"",image:""},deletePost:""}},filters:{moment:function(t){return l()(t).format("MMM D, YYYY, h:mm a")}},computed:Object(r["a"])(Object(r["a"])({},Object(i["c"])("auth",["user"])),Object(i["c"])("post",["posts","post_types"])),mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.title="Info Kiosk - Post Management",t.initialLoading=!0,e.next=4,t.checkAuthUser();case 4:return e.next=6,t.$store.dispatch("post/getPost",1);case 6:t.initialLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},methods:Object(r["a"])(Object(r["a"])({},Object(i["b"])("auth",["checkAuthUser"])),{},{approvePost:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("post/approvePost",t.approve_post);case 2:s=e.sent,200==s.status?t.$toast.success("Post has been approved"):t.$toast.error("Something went wrong"),t.$bvModal.hide("approvePostModal");case 5:case"end":return e.stop()}}),e)})))()},updatePost:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$store.commit("post/SET_UPDATE_POST",t),e.$router.push("/user/post/update");case 2:case"end":return s.stop()}}),s)})))()},destroyPost:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch("post/deletePost",t.deletePost);case 3:if(s=e.sent,200!=s.status){e.next=11;break}return e.next=7,t.$store.dispatch("post/getPost",1);case 7:t.$toast.success("Post deleted successfully!"),t.$bvModal.hide("deleteModal"),e.next=12;break;case 11:t.$toast.error("Something went wrong");case 12:t.isLoading=!1;case 13:case"end":return e.stop()}}),e)})))()},searchPost:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={search:e.search_role},e.isSearching=!0,s.next=4,e.$store.dispatch("post/searchPost",{page:t,data:a});case 4:e.isSearching=!1;case 5:case"end":return s.stop()}}),s)})))()},getPost:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("post/getPost",t);case 2:case"end":return s.stop()}}),s)})))()},postSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;""==this.search_post?this.getPost(t):this.searchPost(t)}}),watch:{search_post:function(t,e){this.postSearch()}}},p=u,d=s("2877"),v=Object(d["a"])(p,a,o,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0b68fc.14cb6ad5.js.map