(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f47e844"],{"0b0e":function(t,e,s){"use strict";s("4097")},"1e4f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.hasImgPopup?s("div",{staticClass:"img-selected",on:{click:function(e){e.preventDefault(),t.hasImgPopup=!1}}},[s("div",{staticClass:"img-selected--close"},[t._v("Click anywhere to close")]),s("img",{attrs:{src:"http://127.0.0.1:8000/uploads/"+t.imgPopup,alt:""}})]):t._e(),s("div",{staticClass:"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4"},[s("div",{staticClass:"row justify-content-center mt-3"},[s("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[s("div",{staticClass:"card p-5 mb-4"},[t._m(0),s("div",{staticClass:"d-flex justify-content-end mt-2"},[s("router-link",{staticClass:"btn btn-purple btn-sm me-2 d-flex align-items-center",attrs:{to:"/user/post/create"}},[s("i",{staticClass:"bi bi-plus-circle me-2"}),t._v(" New Post")]),s("div",{staticClass:"col-7 col-sm-5 col-md-5 col-lg-4 col-xl-3"},[s("div",{staticClass:"input-group form-floating"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search_post,expression:"search_post"}],staticClass:"form-control",attrs:{type:"text",id:"floatingSearchOrg",placeholder:"Search here"},domProps:{value:t.search_post},on:{input:function(e){e.target.composing||(t.search_post=e.target.value)}}}),s("label",{attrs:{for:"floatingSearchOrg"}},[t._v("Search here")]),t._m(1)])])],1),s("div",{staticClass:"table-responsive mt-3"},[t.initialLoading?s("b-skeleton-table",{attrs:{rows:4,columns:7,"table-props":{bordered:!1,striped:!0}}}):t._e(),t.initialLoading?t._e():s("table",{staticClass:"table table-hover"},[s("caption",[t._v(" Showing "+t._s(t.posts.from?t.posts.from:0)+" to "+t._s(t.posts.to?t.posts.to:0)+" out of "+t._s(t.posts.total)+" posts. ")]),s("thead",[s("tr",[s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Cover Image")]),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Title")]),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Post Excerpt")]),"University Admin"!=t.user.userinfo.role.role&&"President"!=t.user.userinfo.role.role&&"Unit Chair"!=t.user.userinfo.role.role&&"OSA"!=t.user.userinfo.role.role?s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Status")]):t._e(),s("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[t._v("Date Posted")]),s("th",{attrs:{scope:"col"}},[t._v("Actions")])])]),s("tbody",[0!=t.posts.data||t.initialLoading?t._l(t.posts.data,(function(e,a){return s("tr",{key:a},[s("td",{on:{click:function(s){s.preventDefault(),t.viewPost=e,t.$bvModal.show("viewPostModal")}}},[e.postcontent.image?s("img",{attrs:{src:t.imgURL+"/"+e.postcontent.image,alt:"",width:"100"}}):s("p",{staticClass:"text-muted"},[t._v("No Image")])]),s("td",{staticClass:"text-nowrap cursor-pointer",on:{click:function(s){s.preventDefault(),t.viewPost=e,t.$bvModal.show("viewPostModal")}}},[t._v(" "+t._s(e.postcontent.title)+" "),s("br")]),s("td",{staticClass:"cursor-pointer",on:{click:function(s){s.preventDefault(),t.viewPost=e,t.$bvModal.show("viewPostModal")}}},[s("div",{staticStyle:{"min-width":"150px","max-width":"260px"}},[t._v(" "+t._s(e.postcontent.post_excerpt)+" ")])]),"University Admin"!=t.user.userinfo.role.role&&"President"!=t.user.userinfo.role.role&&"Unit Chair"!=t.user.userinfo.role.role&&"OSA"!=t.user.userinfo.role.role?s("td",{staticClass:"cursor-pointer"},[s("b-badge",{attrs:{variant:"Approved"==e.status?"success rounded-pill":"info rounded-pill"}},[t._v(t._s(e.status))])],1):t._e(),s("td",{staticClass:"text-nowrap"},[t._v(t._s(t._f("moment")(e.created_at)))]),s("td",[s("div",{staticClass:"d-flex"},[t.$can("approve_post")&&"Approved"!=e.status?s("button",{staticClass:"btn btn-sm btn-success rounded-pill btn-approve me-2",on:{click:function(s){s.preventDefault(),t.approve_post.id=e.id,t.$bvModal.show("approvePostModal")}}},[s("i",{staticClass:"bi bi-check"})]):t._e(),e.user_account_id==t.user.id?s("button",{staticClass:"btn btn-sm btn-success rounded-pill btn-approve me-2",on:{click:function(s){return s.preventDefault(),t.updatePost(e)}}},[s("i",{staticClass:"bi bi-pencil-square"})]):t._e(),t.$can("delete_post")||e.user_account_id==t.user.id?s("button",{staticClass:"btn btn-sm btn-danger rounded-pill btn-approve me-2",on:{click:function(s){t.deletePost=e.id,t.$bvModal.show("deleteModal")}}},[s("i",{staticClass:"bi bi-trash"})]):t._e()])])])})):s("tr",[s("td",{staticClass:"text-center pt-3 pb-3",attrs:{colspan:"6"}},[t._v("There are no records to show")])])],2)])],1),t.posts.data?s("div",{staticClass:"row mt-3"},[s("pagination",{attrs:{showDisabled:!0,align:"right",data:t.posts}},[s("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[t._v("«")]),s("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[t._v("»")])])],1):t._e()])])]),s("div",{staticClass:"row justify-content-center mt-3"},[s("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[s("div",{staticClass:"card p-5 mb-4"},[t._m(2),s("div",{staticClass:"d-flex justify-content-end mt-2"},[s("router-link",{staticClass:"btn btn-purple btn-sm me-2 d-flex align-items-center",attrs:{to:"/user/post/create"}},[s("i",{staticClass:"bi bi-plus-circle me-2"}),t._v(" New Post")]),s("div",{staticClass:"col-7 col-sm-5 col-md-5 col-lg-4 col-xl-3"},[s("div",{staticClass:"input-group form-floating"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterUpdates,expression:"filterUpdates"}],staticClass:"form-control",attrs:{type:"text",id:"floatingSearchOrg",placeholder:"Search here"},domProps:{value:t.filterUpdates},on:{input:function(e){e.target.composing||(t.filterUpdates=e.target.value)}}}),s("label",{attrs:{for:"floatingSearchOrg"}},[t._v("Search here")]),t._m(3)])])],1),t.imageupdates?s("div",{staticClass:"table-responsive mt-3"},[t.initialLoading||t.isSearching?s("b-skeleton-table",{attrs:{rows:6,columns:5,"table-props":{bordered:!1,striped:!0}}}):s("b-table",{attrs:{id:"imageUpdatesTable",items:t.imageupdates,filter:t.filterUpdates,"filter-included-fields":t.filterOn,fields:["image","title","added_by","created_at","actions"],"per-page":8,"current-page":t.currentPage,striped:"","show-empty":""},scopedSlots:t._u([{key:"cell(image)",fn:function(e){return[e.item.image?s("img",{attrs:{src:t.imgURL+"/"+e.item.image,alt:"",width:"100"}}):s("p",{staticClass:"text-muted text-nowrap"},[t._v("No Image")])]}},{key:"cell(added_by)",fn:function(e){return[t._v(" "+t._s(e.item.user.userinfo.first_name)+" "+t._s(e.item.user.userinfo.last_name)+" ")]}},{key:"cell(created_at)",fn:function(e){return[t._v(" "+t._s(t._f("moment")(e.item.created_at))+" ")]}},{key:"cell(actions)",fn:function(e){return[s("div",{staticClass:"d-flex"},[s("b-button",{staticClass:"me-2",attrs:{variant:"success",size:"sm"},on:{click:function(s){s.preventDefault(),t.$bvModal.show("viewImageModal"),t.selectedImgs=e.item}}},[t._v(" View ")]),s("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(s){s.preventDefault(),t.deletePost=e.item.id,t.$bvModal.show("deleteImageUpdateModal")}}},[t._v(" Delete ")])],1)]}}],null,!1,2963581903)}),s("div",{staticClass:"d-flex justify-content-end"},[s("b-pagination",{staticClass:"mt-3",attrs:{"total-rows":t.imageupdates.length,"per-page":8,"aria-controls":"imageUpdatesTable"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1):t._e()])])])]),s("b-modal",{attrs:{id:"viewImageModal",scrollable:"",centered:"",title:"Images"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")])]}}])},[s("div",{staticClass:"row"},t._l(t.selectedImgs.images,(function(e,a){return s("div",{key:a,staticClass:"col-6"},[s("img",{staticClass:"img-fluid me-2 cursor-pointer",attrs:{height:"200",width:"200",src:"http://127.0.0.1:8000/uploads/"+e.image},on:{click:function(s){s.preventDefault(),t.imgPopup=e.image,t.hasImgPopup=!0}}})])})),0)]),s("b-modal",{attrs:{id:"deleteImageUpdateModal",centered:"",title:"Confirm Delete"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),s("b-button",{attrs:{variant:"danger",disabled:t.isLoading},on:{click:function(e){return e.preventDefault(),t.destroyImageUpdate.apply(null,arguments)}}},[t._v(" Delete ")])]}}])},[s("p",{},[t._v("Are you sure to delete this post? This will delete all its images as well")])]),s("b-modal",{attrs:{id:"deleteModal",centered:"",title:"Confirm Delete"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),s("b-button",{attrs:{variant:"danger",disabled:t.isLoading},on:{click:function(e){return e.preventDefault(),t.destroyPost.apply(null,arguments)}}},[t._v(" Delete ")])]}}])},[s("p",{},[t._v("Are you sure to delete this post?")])]),s("b-modal",{attrs:{id:"viewPostModal",scrollable:"",centered:"",title:t.viewPost.postcontent.title},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Close ")])]}}])},[s("div",{domProps:{innerHTML:t._s(t.viewPost.postcontent.content)}}),t.viewPost.useraccount?s("p",{staticClass:" mt-3"},[s("small",[t._v("Added by: "),s("strong",[t._v(t._s(t.viewPost.useraccount.userinfo.first_name)+" "+t._s(t.viewPost.useraccount.userinfo.last_name))])])]):t._e(),s("p",{},[s("small",[t._v(t._s(t._f("moment")(t.viewPost.created_at)))])]),s("p",{},[s("small",[t._v("Views: "+t._s(t.viewPost.views))])])]),s("b-modal",{attrs:{id:"approvePostModal",centered:"",title:"Confirm Approve"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var a=e.cancel;return[s("b-button",{attrs:{disabled:t.isLoading,variant:"primary"},on:{click:function(t){return a()}}},[t._v(" Cancel ")]),s("b-button",{attrs:{disabled:t.isLoading,variant:"success"},on:{click:function(e){return e.preventDefault(),t.approvePost.apply(null,arguments)}}},[t._v(" Approve ")])]}}])},[s("p",{},[t._v("Are you sure you want to approve this post?")])])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticClass:"d-flex flex-column me-auto mt-2"},[s("h5",{staticClass:"text-violet"},[t._v("UPDATES")]),s("p",{staticClass:"mb-4"},[s("small",[t._v("Manage your updates below")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-purple"},[s("i",{staticClass:"bi bi-search"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex align-items-center"},[s("div",{staticClass:"d-flex flex-column me-auto mt-2"},[s("h5",{staticClass:"text-violet"},[t._v("IMAGE UPDATE")]),s("p",{staticClass:"mb-4"},[s("small",[t._v("Manage your image updates below")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"btn btn-purple"},[s("i",{staticClass:"bi bi-search"})])}],r=s("1da1"),n=s("5530"),i=(s("96cf"),s("2f62")),c=s("c1df"),l=s.n(c),u=s("2ef0"),d={data:function(){return{hasImgPopup:!1,imgPopup:"",selectedImgs:{image:""},currentPage:1,selectedImageUpdate:"",viewPost:{postcontent:{title:"",content:""}},initialLoading:!1,isLoading:!1,isSearching:!1,search_post:"",update_search:"",filterUpdates:null,filterOn:[],approve_post:{id:""},post:{title:"",content:"",image:""},update:{title:"",content:"",image:""},deletePost:""}},filters:{moment:function(t){return l()(t).format("MMM D, YYYY, h:mm a")}},computed:Object(n["a"])(Object(n["a"])({},Object(i["c"])("auth",["user"])),Object(i["c"])("post",["posts","post_types","imageupdates"])),mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.title="Info Kiosk - Post Management",t.initialLoading=!0,e.next=4,t.checkAuthUser();case 4:return e.next=6,t.$store.dispatch("post/getPost",1);case 6:return e.next=8,t.$store.dispatch("post/getImageUpdates");case 8:t.initialLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},methods:Object(n["a"])(Object(n["a"])({},Object(i["b"])("auth",["checkAuthUser"])),{},{approvePost:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("post/approvePost",t.approve_post);case 2:s=e.sent,200==s.status?t.$toast.success("Post has been approved"):t.$toast.error("Something went wrong"),t.$bvModal.hide("approvePostModal");case 5:case"end":return e.stop()}}),e)})))()},updatePost:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.$store.commit("post/SET_UPDATE_POST",t),e.$router.push("/user/post/update");case 2:case"end":return s.stop()}}),s)})))()},destroyPost:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch("post/deletePost",t.deletePost);case 3:if(s=e.sent,200!=s.status){e.next=11;break}return e.next=7,t.$store.dispatch("post/getPost",1);case 7:t.$toast.success("Post deleted successfully!"),t.$bvModal.hide("deleteModal"),e.next=12;break;case 11:t.$toast.error("Something went wrong");case 12:t.isLoading=!1;case 13:case"end":return e.stop()}}),e)})))()},destroyImageUpdate:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$store.dispatch("post/deleteImagePost",t.deletePost);case 3:s=e.sent,200==s.status?(t.$toast.success("Post deleted successfully!"),t.$bvModal.hide("deleteImageUpdateModal")):t.$toast.error("Something went wrong"),t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},searchPost:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a={search:e.search_post},e.isSearching=!0,s.next=4,e.$store.dispatch("post/searchPost",{page:t,data:a});case 4:e.isSearching=!1;case 5:case"end":return s.stop()}}),s)})))()},getPost:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$store.dispatch("post/getPost",t);case 2:case"end":return s.stop()}}),s)})))()},postSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;""==this.search_post?this.getPost(t):this.searchPost(t)}}),created:function(){this.debouncedPostSearch=u.debounce(this.postSearch,800)},watch:{search_post:function(t,e){this.debouncedPostSearch()}}},p=d,m=(s("0b0e"),s("2877")),v=Object(m["a"])(p,a,o,!1,null,null,null);e["default"]=v.exports},4097:function(t,e,s){}}]);
//# sourceMappingURL=chunk-5f47e844.8f4a35b2.js.map