(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2415319b"],{"99af":function(e,t,a){"use strict";var r=a("23e7"),n=a("d039"),o=a("e8b5"),s=a("861d"),i=a("7b0b"),l=a("50c4"),d=a("8418"),c=a("65f0"),p=a("1dde"),u=a("b622"),m=a("2d00"),v=u("isConcatSpreadable"),f=9007199254740991,b="Maximum allowed index exceeded",h=m>=51||!n((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),g=p("concat"),_=function(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:o(e)},w=!h||!g;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,r,n,o,s=i(this),p=c(s,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?s:arguments[t],_(o)){if(n=l(o.length),u+n>f)throw TypeError(b);for(a=0;a<n;a++,u++)a in o&&d(p,u,o[a])}else{if(u>=f)throw TypeError(b);d(p,u++,o)}return p.length=u,p}})},a137:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4"},[a("div",{staticClass:"row me-0 ms-0 justify-content-center mt-3"},[a("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"card p-5"},[e._m(0),a("div",{staticClass:"d-flex justify-content-end mt-2"},[a("button",{staticClass:"btn btn-purple btn-sm me-2",on:{click:function(t){return t.preventDefault(),e.$bvModal.show("newDepartmentModal")}}},[a("i",{staticClass:"bi bi-plus-circle"}),e._v(" Department")]),a("div",{staticClass:"col-7 col-sm-6 col-md-5 col-lg-4 col-xl-3"},[a("div",{staticClass:"input-group form-floating"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search_department,expression:"search_department"}],staticClass:"form-control",attrs:{type:"text",id:"floatingSearchDep",placeholder:"Search here"},domProps:{value:e.search_department},on:{input:function(t){t.target.composing||(e.search_department=t.target.value)}}}),a("label",{attrs:{for:"floatingSearchDep"}},[e._v("Search")]),a("button",{staticClass:"btn btn-purple",on:{click:function(t){return t.preventDefault(),e.departmentSearch.apply(null,arguments)}}},[a("i",{staticClass:"bi bi-search"})])])])]),a("div",{staticClass:"table-responsive mt-3"},[0==e.departments.data?a("div",[e._v("No accounts under organizations")]):e._e(),e.initialLoading||e.isSearching?a("b-skeleton-table",{attrs:{rows:4,columns:3,"table-props":{bordered:!1,striped:!0}}}):a("table",{staticClass:"table table-hover"},[a("caption",[e._v("Showing "+e._s(e.departments.from)+" to "+e._s(e.departments.to)+" out of "+e._s(e.departments.total)+" departments")]),a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[e._v("Logo")]),a("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[e._v("Department")]),a("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[e._v("Added on")]),a("th",{attrs:{scope:"col"}},[e._v("Actions")])])]),a("tbody",e._l(e.departments.data,(function(t,r){return a("tr",{key:r},[a("th",[a("b-avatar",{attrs:{variant:"dark",src:"http://127.0.0.1:8000/uploads/"+t.image}})],1),a("td",[e._v(e._s(t.name))]),a("td",{staticClass:"text-nowrap"},[e._v(e._s(e._f("moment")(t.created_at)))]),a("td",[a("div",{staticClass:"d-flex"},[a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-success rounded-pill btn-approve me-2",attrs:{disabled:e.isLoading&&e.update_department.department_id==t.id,href:"",title:"Update"},on:{click:function(a){a.preventDefault(),e.update_department=JSON.parse(JSON.stringify(t)),e.$bvModal.show("updateDepartmentModal")}}},[e.isLoading&&e.update_department.department_id==t.id?a("div",{staticClass:"spinner-grow text-light spinner-grow-sm",attrs:{role:"status"}},[a("span",{staticClass:"visually-hidden"},[e._v("Loading...")])]):a("i",{staticClass:"bi bi-pencil-square"})]),a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-danger rounded-pill btn-approve me-2",attrs:{disabled:e.isLoading&&e.delete_id==t.id,href:"",title:"Delete"},on:{click:function(a){a.preventDefault(),e.delete_id=t.id,e.$bvModal.show("deleteDepartmentModal")}}},[e.isLoading&&e.delete_id==t.id?a("div",{staticClass:"spinner-grow text-light spinner-grow-sm",attrs:{role:"status"}},[a("span",{staticClass:"visually-hidden"},[e._v("Loading...")])]):a("i",{staticClass:"bi bi-trash"})])])])])})),0)])],1),e.departments.data?a("div",{staticClass:"row mt-3"},[a("pagination",{attrs:{showDisabled:!0,align:"right",data:e.departments},on:{"pagination-change-page":e.departmentSearch}},[a("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[e._v("«")]),a("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[e._v("»")])])],1):e._e()])]),a("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-3 mb-3"},[a("div",{staticClass:"card p-5"},[e._m(1),a("div",{staticClass:"d-flex justify-content-end mt-2"},[a("button",{staticClass:"btn btn-purple btn-sm me-2",on:{click:function(t){return t.preventDefault(),e.$bvModal.show("newRoleModal")}}},[a("i",{staticClass:"bi bi-plus-circle"}),e._v(" New Role")]),a("div",{staticClass:"col-7 col-sm-6 col-md-5 col-lg-4 col-xl-3"},[a("div",{staticClass:"input-group form-floating"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search_role,expression:"search_role"}],staticClass:"form-control",attrs:{type:"text",id:"floatingSearchDep",placeholder:"Search here"},domProps:{value:e.search_role},on:{input:function(t){t.target.composing||(e.search_role=t.target.value)}}}),a("button",{staticClass:"btn btn-purple",on:{click:function(t){return t.preventDefault(),e.departmentRoleSearch.apply(null,arguments)}}},[a("i",{staticClass:"bi bi-search"})]),a("label",{attrs:{for:"floatingSearchDep"}},[e._v("Search")])])])]),a("div",{staticClass:"table-responsive mt-3"},[0==e.dep_roles.data?a("div",[e._v("No roles added for department. Add a role by clicking the New Role button")]):e._e(),e.initialLoading||e.isSearching?a("b-skeleton-table",{attrs:{rows:4,columns:3,"table-props":{bordered:!1,striped:!0}}}):a("table",{staticClass:"table table-hover"},[a("caption",[e._v("Showing "+e._s(e.dep_roles.from)+" to "+e._s(e.dep_roles.to)+" out of "+e._s(e.dep_roles.total)+" department roles")]),a("thead",[a("tr",[a("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[e._v("Role")]),a("th",{staticClass:"text-nowrap",attrs:{scope:"col"}},[e._v("Added on")]),a("th",{attrs:{scope:"col"}},[e._v("Actions")])])]),a("tbody",e._l(e.dep_roles.data,(function(t,r){return a("tr",{key:r},[a("td",{staticClass:"text-nowrap"},[e._v(e._s(t.role))]),a("td",[e._v(e._s(e._f("moment")(t.created_at)))]),a("td",[a("div",{staticClass:"d-flex"},[a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-success rounded-pill btn-approve me-2",attrs:{href:"",title:"Update"},on:{click:function(a){a.preventDefault(),e.data.role=t.role,e.data.role_id=t.id,e.$bvModal.show("updateRoleModal")}}},[a("i",{staticClass:"bi bi-pencil-square"})]),a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-danger rounded-pill btn-approve me-2",attrs:{href:"",title:"Delete"},on:{click:function(a){a.preventDefault(),e.delete_id=t.id,e.$bvModal.show("deleteModal")}}},[a("i",{staticClass:"bi bi-trash"}),e.isLoading?a("div",{staticClass:"spinner-grow text-light spinner-grow-sm",attrs:{role:"status"}},[a("span",{staticClass:"visually-hidden"},[e._v("Loading...")])]):e._e()])])])])})),0)])],1),e.dep_roles.data?a("div",{staticClass:"row mt-3"},[a("pagination",{attrs:{showDisabled:!0,align:"right",data:e.dep_roles},on:{"pagination-change-page":e.departmentRoleSearch}},[a("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[e._v("«")]),a("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[e._v("»")])])],1):e._e()])])])]),a("b-modal",{attrs:{id:"updateRoleModal",centered:"",title:"Update Role"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return r()}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"success",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.updateRole.apply(null,arguments)}}},[e._v(" Update Role ")])]}}])},[a("div",{staticClass:"form-floating mb-2 mt-3 "},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.role,expression:"data.role"}],staticClass:"form-control",attrs:{type:"text",id:"updateRole",placeholder:""},domProps:{value:e.data.role},on:{input:function(t){t.target.composing||e.$set(e.data,"role",t.target.value)}}}),a("label",{attrs:{for:"floatingInput"}},[e._v("Type a new role")])])]),a("b-modal",{attrs:{id:"newRoleModal",centered:"",title:"New Role"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return r()}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"success",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.saveRole.apply(null,arguments)}}},[e._v(" Save Role ")])]}}])},[a("div",{staticClass:"form-floating mb-2 mt-3 "},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.role,expression:"data.role"}],staticClass:"form-control",attrs:{type:"text",id:"floatingInput",placeholder:"name@example.com"},domProps:{value:e.data.role},on:{input:function(t){t.target.composing||e.$set(e.data,"role",t.target.value)}}}),a("label",{attrs:{for:"floatingInput"}},[e._v("Type a new role")])])]),a("b-modal",{attrs:{id:"newDepartmentModal",centered:"",title:"New Department"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return r()}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"success",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.saveDepartment.apply(null,arguments)}}},[e._v(" Save Department ")])]}}])},[a("label",{staticClass:"mt-2",attrs:{for:"brand"}},[e._v("Image")]),a("VueFileAgent",{ref:"vueFileAgent",staticClass:"mb-4",attrs:{multiple:!1,maxSize:"5MB",deletable:!0,accept:"image/*,",theme:"list",errorText:{type:"Invalid file type. Only image file is allowed",size:"Image should not exceed 5MB in size"}},on:{select:function(t){return e.filesSelected(t)},beforedelete:function(t){return e.onBeforeDelete(t)},delete:function(t){return e.fileDeleted(t)}},model:{value:e.fileRecords,callback:function(t){e.fileRecords=t},expression:"fileRecords"}}),a("div",{staticClass:"form-floating mb-2 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.department.department,expression:"department.department"}],staticClass:"form-control",attrs:{type:"text",id:"newDepartment",placeholder:"name@example.com"},domProps:{value:e.department.department},on:{input:function(t){t.target.composing||e.$set(e.department,"department",t.target.value)}}}),a("label",{attrs:{for:"newDepartmet"}},[e._v("Type a new department")])]),a("div",{staticClass:"form-floating mb-2 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.department.abbreviation,expression:"department.abbreviation"}],staticClass:"form-control",attrs:{type:"text",id:"newDepAbbrev",placeholder:""},domProps:{value:e.department.abbreviation},on:{input:function(t){t.target.composing||e.$set(e.department,"abbreviation",t.target.value)}}}),a("label",{attrs:{for:"newOrgAbbrev"}},[e._v("Abbreviation")])])],1),a("b-modal",{attrs:{id:"updateDepartmentModal",centered:"",title:"Update Department"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return r()}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"success",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.updateDepartment.apply(null,arguments)}}},[e._v(" Update ")])]}}])},[a("label",{staticClass:"mt-2",attrs:{for:"brand"}},[e._v("Image")]),a("VueFileAgent",{ref:"vueFileAgent",staticClass:"mb-4",attrs:{multiple:!1,maxSize:"5MB",deletable:!0,accept:"image/*,",theme:"list",errorText:{type:"Invalid file type. Only image file is allowed",size:"Image should not exceed 5MB in size"}},on:{select:function(t){return e.filesSelected(t)},beforedelete:function(t){return e.onBeforeDelete(t)},delete:function(t){return e.fileDeleted(t)}},model:{value:e.fileRecords,callback:function(t){e.fileRecords=t},expression:"fileRecords"}}),a("div",{staticClass:"form-floating mb-2 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.update_department.name,expression:"update_department.name"}],staticClass:"form-control",attrs:{type:"text",id:"updateDepartment",placeholder:"name@example.com"},domProps:{value:e.update_department.name},on:{input:function(t){t.target.composing||e.$set(e.update_department,"name",t.target.value)}}}),a("label",{attrs:{for:"newDepartmet"}},[e._v("Type a new department")])]),a("div",{staticClass:"form-floating mb-2 mt-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.update_department.abbreviation,expression:"update_department.abbreviation"}],staticClass:"form-control",attrs:{type:"text",id:"newDepAbbrev",placeholder:""},domProps:{value:e.update_department.abbreviation},on:{input:function(t){t.target.composing||e.$set(e.update_department,"abbreviation",t.target.value)}}}),a("label",{attrs:{for:"newOrgAbbrev"}},[e._v("Abbreviation")])])],1),a("b-modal",{attrs:{id:"deleteDepartmentModal",centered:"",title:"Confirm Delete"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return r()}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"primary",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.$bvModal.show("selectDepartmentModal")}}},[e._v(" Change Department ")]),a("b-button",{attrs:{variant:"danger",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.deleteDepartment.apply(null,arguments)}}},[e._v(" Delete ")])]}}])},[a("p",{},[e._v("Deleting a department will delete all accounts under that department. You cannot undo this action but you can set a new department for those accounts. Are you sure you want to delete this department?")])]),a("b-modal",{attrs:{id:"selectDepartmentModal",centered:"",title:"Select Department"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"success"},on:{click:function(e){return r()}}},[e._v(" Save ")])]}}])},[a("p",{staticClass:"mb-3"},[e._v("If there are accounts under this department, you can transfer them to a new department so that those accounts will not be deleted.")]),a("label",{attrs:{for:"floatingSelect text-muted "}},[a("small",[e._v("New Department")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.new_department,expression:"new_department"}],staticClass:"form-select",attrs:{id:"floatingSelect","aria-label":"Select deparments modal"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.new_department=t.target.multiple?a:a[0]}}},e._l(e.alldepartments,(function(t,r){return a("option",{key:r,attrs:{disabled:e.delete_id==t.id},domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),a("b-modal",{attrs:{id:"deleteModal",centered:"",title:"Confirm Delete"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return r()}}},[e._v(" Cancel ")]),a("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.$bvModal.show("selectRoleModal")}}},[e._v(" Change Role ")]),a("b-button",{attrs:{variant:"danger"},on:{click:function(t){return t.preventDefault(),e.deleteRole.apply(null,arguments)}}},[e._v(" Delete ")])]}}])},[a("p",{},[e._v("Deleting a role will delete all accounts under that role. You cannot undo this action but you can set a new role for those accounts. Are you sure you want to delete this role?")])]),a("b-modal",{attrs:{id:"selectRoleModal",centered:"",title:"Select Role"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.cancel;return[a("b-button",{attrs:{variant:"success"},on:{click:function(e){return r()}}},[e._v(" Save ")])]}}])},[a("p",{staticClass:"mb-3"},[e._v("If there are accounts under this role you can select a new role so that those accounts will not be deleted.")]),a("label",{attrs:{for:"floatingSelect text-muted "}},[a("small",[e._v("New Role")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"role"}],staticClass:"form-select",attrs:{id:"floatingSelect","aria-label":"Select role modal"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.role=t.target.multiple?a:a[0]}}},e._l(e.dep_roles.data,(function(t,r){return a("option",{key:r,attrs:{disabled:e.delete_id==t.id},domProps:{value:t.id}},[e._v(e._s(t.role))])})),0),e.dep_roles.data?a("div",{staticClass:"mt-3"},[a("pagination",{attrs:{showDisabled:!0,align:"right",data:e.dep_roles},on:{"pagination-change-page":e.getRoleDepartments}},[a("span",{attrs:{slot:"prev-nav"},slot:"prev-nav"},[e._v("«")]),a("span",{attrs:{slot:"next-nav"},slot:"next-nav"},[e._v("»")])])],1):e._e()])],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"d-flex flex-column me-auto mt-2"},[a("h5",{staticClass:"text-violet"},[e._v("Departments")]),a("p",{staticClass:"mb-4"},[a("small",[e._v("Manage your departments below")])])]),a("div",{staticClass:"d-flex flex-column mt-2"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex align-items-center"},[a("div",{staticClass:"d-flex flex-column me-auto mt-2"},[a("h5",{staticClass:"text-violet"},[e._v("Department Roles")]),a("p",{staticClass:"mb-4"},[a("small",[e._v("Manage your roles for departments below")])])])])}],o=a("5530"),s=a("1da1"),i=(a("4de4"),a("99af"),a("a434"),a("96cf"),a("2f62")),l=a("c1df"),d=a.n(l),c=a("2ef0"),p={filters:{moment:function(e){return d()(e).format("MMMM D, YYYY, h:mm a")}},data:function(){return{initialLoading:!1,isLoading:!1,delete_id:"",role:"",search_department:"",search_role:"",data:{role:"",role_id:""},new_department:"",department:{image:"",department:"",department_id:""},update_department:{image:"",name:"",department_id:""},isSearching:!1,fileRecords:[],fileRecordsForUpload:[]}},watch:{search_department:function(e,t){this.debouncedDepartmentSearch()},search_role:function(e,t){this.debouncedDepartmentRoleSearch()}},created:function(){this.debouncedDepartmentRoleSearch=c.debounce(this.departmentRoleSearch,1e3),this.debouncedDepartmentSearch=c.debounce(this.departmentSearch,1e3)},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return document.title="Department and Department Roles Management",e.initialLoading=!0,t.next=4,e.$store.dispatch("depandorg/getDepartments",1);case 4:return t.next=6,e.$store.dispatch("depandorg/getAllDepartments");case 6:return t.next=8,e.$store.dispatch("depandorg/getRoleDepartments",1);case 8:e.initialLoading=!1;case 9:case"end":return t.stop()}}),t)})))()},methods:{filesSelected:function(e){var t=e.filter((function(e){return!e.error}));this.fileRecordsForUpload=this.fileRecordsForUpload.concat(t)},fileDeleted:function(e){var t=this.fileRecordsForUpload.indexOf(e);-1!==t&&this.fileRecordsForUpload.splice(t,1)},onBeforeDelete:function(e){console.log(e);var t=this.fileRecordsForUpload.indexOf(e);if(-1!==t){this.fileRecordsForUpload.splice(t,1);var a=this.fileRecords.indexOf(e);-1!==a&&this.fileRecords.splice(a,1)}},getDepartments:function(){var e=arguments,t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,a.next=3,t.$store.dispatch("depandorg/getDepartments",r);case 3:case"end":return a.stop()}}),a)})))()},getRoleDepartments:function(){var e=arguments,t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,a.next=3,t.$store.dispatch("depandorg/getRoleDepartments",r);case 3:case"end":return a.stop()}}),a)})))()},saveDepartment:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.department.department){t.next=2;break}return t.abrupt("return",e.$toast.error("Department name is required!"));case 2:if(e.isLoading=!0,!(e.fileRecordsForUpload.length>0)){t.next=8;break}return t.next=6,e.$refs.vueFileAgent.upload("http://127.0.0.1:8000/api/admin/uploadDepartmentImage?token="+localStorage.getItem("auth"),{"X-Requested-With":"XMLHttpRequest"},e.fileRecordsForUpload);case 6:a=t.sent,e.department.image=a[0].data;case 8:return t.next=10,e.$store.dispatch("depandorg/saveDepartment",e.department);case 10:if(r=t.sent,200!=r.status){t.next=17;break}return t.next=14,e.$store.dispatch("depandorg/getDepartments",1);case 14:e.$toast.success("Department added successfully!"),e.$bvModal.hide("newDepartmentModal"),e.department={department:"",department_id:""};case 17:e.isLoading=!1;case 18:case"end":return t.stop()}}),t)})))()},updateDepartment:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoading=!0,!(e.fileRecordsForUpload.length>0)){t.next=6;break}return t.next=4,e.$refs.vueFileAgent.upload("http://127.0.0.1:8000/api/admin/uploadDepartmentImage?token="+localStorage.getItem("auth"),{"X-Requested-With":"XMLHttpRequest"},e.fileRecordsForUpload);case 4:a=t.sent,e.update_department.image=a[0].data;case 6:return t.next=8,e.$store.dispatch("depandorg/updateDepartment",e.update_department);case 8:r=t.sent,200==r.status&&(e.getDepartments(),e.$toast.success("Department updated successfully!"),e.$bvModal.hide("updateDepartmentModal"),e.update_department={department:"",department_id:""}),e.isLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},deleteDepartment:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$store.dispatch("depandorg/deleteDepartment",{id:e.delete_id,data:e.new_department});case 3:if(a=t.sent,200!=a.status){t.next=10;break}return t.next=7,e.$store.dispatch("depandorg/getDepartments",1);case 7:e.$toast.success("Department deleted successfully!"),e.$bvModal.hide("deleteDepartmentModal"),e.new_department="";case 10:e.isLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},deleteRole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("depandorg/deleteDepRole",{id:e.delete_id,role:e.role});case 2:a=t.sent,200==a.status&&(e.$toast.success("Role deleted successfully!"),e.$bvModal.hide("deleteModal"));case 4:case"end":return t.stop()}}),t)})))()},saveRole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$store.dispatch("depandorg/saveDepRole",e.data);case 3:a=t.sent,200==a.status&&(e.$toast.success("Role added successfully!"),e.$bvModal.hide("newRoleModal"),e.data={role:"",role_id:""}),e.isLoading=!1;case 6:case"end":return t.stop()}}),t)})))()},updateRole:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,e.$store.dispatch("depandorg/updateDepRole",e.data);case 3:if(a=t.sent,200!=a.status){t.next=10;break}return e.$toast.success("Role updated successfully!"),t.next=8,e.getRoleDepartments();case 8:e.$bvModal.hide("updateRoleModal"),e.data={role:"",role_id:""};case 10:e.isLoading=!1;case 11:case"end":return t.stop()}}),t)})))()},searchDepartment:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isSearching=!0,r={search:t.search_department},a.next=4,t.$store.dispatch("depandorg/searchDepartment",{page:e,data:r});case 4:t.isSearching=!1;case 5:case"end":return a.stop()}}),a)})))()},searchDepartmentRole:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isSearching=!0,r={search:t.search_role},a.next=4,t.$store.dispatch("depandorg/searchDepartmentRole",{page:e,data:r});case 4:t.isSearching=!1;case 5:case"end":return a.stop()}}),a)})))()},departmentSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;""==this.search_department?this.getDepartments(e):this.searchDepartment(e)},departmentRoleSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;""==this.search_role?this.getRoleDepartments(e):this.searchDepartmentRole(e)}},computed:Object(o["a"])({},Object(i["c"])("depandorg",["departments","dep_roles","alldepartments"]))},u=p,m=a("2877"),v=Object(m["a"])(u,r,n,!1,null,null,null);t["default"]=v.exports},a434:function(e,t,a){"use strict";var r=a("23e7"),n=a("23cb"),o=a("a691"),s=a("50c4"),i=a("7b0b"),l=a("65f0"),d=a("8418"),c=a("1dde"),p=c("splice"),u=Math.max,m=Math.min,v=9007199254740991,f="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var a,r,c,p,b,h,g=i(this),_=s(g.length),w=n(e,_),x=arguments.length;if(0===x?a=r=0:1===x?(a=0,r=_-w):(a=x-2,r=m(u(o(t),0),_-w)),_+a-r>v)throw TypeError(f);for(c=l(g,r),p=0;p<r;p++)b=w+p,b in g&&d(c,p,g[b]);if(c.length=r,a<r){for(p=w;p<_-r;p++)b=p+r,h=p+a,b in g?g[h]=g[b]:delete g[h];for(p=_;p>_-r+a;p--)delete g[p-1]}else if(a>r)for(p=_-r;p>w;p--)b=p+r-1,h=p+a-1,b in g?g[h]=g[b]:delete g[h];for(p=0;p<a;p++)g[p+w]=arguments[p+2];return g.length=_-r+a,c}})}}]);
//# sourceMappingURL=chunk-2415319b.f9b4333b.js.map