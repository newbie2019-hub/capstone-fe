(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14716ec8"],{1245:function(t,e,a){"use strict";a("ae1f")},"14cd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container pe-0 pe-sm-0 pe-md-2 pe-lg-4 pe-xl-4"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"card mb-3 pe-5 ps-5 pb-4 pt-4"},[a("h5",{staticClass:"mt-3"},[t._v("Create Post")]),a("p",{staticClass:"text-muted"},[t._v("All fields are required")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.updatePost.apply(null,arguments)}}},[a("div",{staticClass:"col-10 col-sm-10 col-md-7 col-lg-6"},[a("label",{staticClass:"mt-3",attrs:{for:""}},[t._v("Image")]),a("VueFileAgent",{ref:"vueFileAgent",staticClass:"mb-2",attrs:{multiple:!1,maxSize:"5MB",deletable:!0,accept:"image/*,",theme:"list",errorText:{type:"Invalid file type. Only image file is allowed",size:"Image should not exceed 5MB in size"}},on:{select:function(e){return t.filesSelected(e)},beforedelete:function(e){return t.onBeforeDelete(e)},delete:function(e){return t.fileDeleted(e)}},model:{value:t.fileRecords,callback:function(e){t.fileRecords=e},expression:"fileRecords"}}),a("label",{staticClass:"mt-1",attrs:{for:"posttitle"}},[t._v("Enter Title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"form-control",attrs:{type:"text",id:"posttitle",placeholder:" "},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}}),a("label",{staticClass:"mt-1",attrs:{for:"postexcerpt"}},[t._v("Post Excerpt")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.post_excerpt,expression:"data.post_excerpt"}],staticClass:"form-control",attrs:{type:"text",id:"postexcerpt",placeholder:" "},domProps:{value:t.data.post_excerpt},on:{input:function(e){e.target.composing||t.$set(t.data,"post_excerpt",e.target.value)}}}),a("label",{staticClass:"mt-2",attrs:{for:"updatecontent"}},[t._v("Content")])],1),a("vue-editor",{attrs:{id:"editor",customModules:t.customModulesForEditor,editorOptions:t.editorSettings,editorToolbar:t.customToolbar,useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.data.content,callback:function(e){t.$set(t.data,"content",e)},expression:"data.content"}}),a("div",{staticClass:"d-flex mt-3"},[a("button",{staticClass:"btn btn-success btn-sm me-1",attrs:{type:"submit"}},[t._v("Update Post")]),a("a",{staticClass:"btn btn-secondary btn-sm",attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$router.back()}}},[t._v("Cancel")])])],1)])])])])])},o=[],r=a("5530"),i=a("1da1"),n=(a("4de4"),a("99af"),a("a434"),a("96cf"),a("5873")),l=a("a60e"),c=a.n(l),d=a("2a19"),u=a("2f62"),p={components:{VueEditor:n["a"]},data:function(){return{customModulesForEditor:[{alias:"imageDrop",module:d["a"]},{alias:"imageResize",module:c.a}],fileRecords:[],fileRecordsForUpload:[],editorSettings:{modules:{imageDrop:!0,imageResize:{}}},customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{script:"sub"},{script:"super"}],[{color:[]},{background:[]}],["link","image"],["clean"]],data:{title:"",content:"",post_excerpt:""}}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.title="Create Post - Touchless Information Management",t.isLoading=!0,t.initialLoading=!0,e.next=5,t.checkAuthUser();case 5:t.setContent(),t.initialLoading=!1,t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},computed:Object(r["a"])({},Object(u["c"])("post",["updatepost"])),methods:Object(r["a"])(Object(r["a"])({},Object(u["b"])("auth",["checkAuthUser"])),{},{setContent:function(){this.data.title=this.updatepost.postcontent.title,this.data.content=this.updatepost.postcontent.content,this.data.post_excerpt=this.updatepost.postcontent.post_excerpt,this.data.id=this.updatepost.id},filesSelected:function(t){var e=t.filter((function(t){return!t.error}));this.fileRecordsForUpload=this.fileRecordsForUpload.concat(e)},fileDeleted:function(t){var e=this.fileRecordsForUpload.indexOf(t);-1!==e&&this.fileRecordsForUpload.splice(e,1)},onBeforeDelete:function(t){console.log(t);var e=this.fileRecordsForUpload.indexOf(t);if(-1!==e){this.fileRecordsForUpload.splice(e,1);var a=this.fileRecords.indexOf(t);-1!==a&&this.fileRecords.splice(a,1)}},handleImageAdded:function(t){var e=new FormData;e.append("image",t)},updatePost:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.data.title){e.next=2;break}return e.abrupt("return",t.$toast.error("Title is required!"));case 2:if(""!=t.data.content){e.next=4;break}return e.abrupt("return",t.$toast.error("Post content is required!"));case 4:if(""!=t.data.post_excerpt){e.next=6;break}return e.abrupt("return",t.$toast.error("Post excerpt is required!"));case 6:if(!(t.fileRecordsForUpload.length>0)){e.next=11;break}return e.next=9,t.$refs.vueFileAgent.upload("http://127.0.0.1:8000/api/user/uploadPostImage?token="+localStorage.getItem("auth"),{"X-Requested-With":"XMLHttpRequest"},t.fileRecordsForUpload);case 9:a=e.sent,t.data.image=a[0].data;case 11:return t.isLoading=!0,e.next=14,t.$store.dispatch("post/updatePost",t.data);case 14:s=e.sent,200==s.status&&(t.$toast.success("Post updated successfully!"),t.data={title:"",content:""},t.$router.push("/user/post")),t.isLoading=!1;case 17:case"end":return e.stop()}}),e)})))()}})},f=p,m=(a("1245"),a("2877")),g=Object(m["a"])(f,s,o,!1,null,null,null);e["default"]=g.exports},ae1f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-14716ec8.3d8f0cf2.js.map